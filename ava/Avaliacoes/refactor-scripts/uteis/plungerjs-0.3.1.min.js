(function(e,a){var c={init:false,events:{update:"plungerUpdate"},chainlist:{},callchain:function(h){var f,g=h&&c.chainlist[h];if(!g){f=a.Callbacks();g={fire:function(j,i){f.fire(j,i)},add:function(i){f.empty();f.add(i)},remove:function(){f.empty()}};if(f){c.chainlist[h]=g}}return g}};var d=new (function(){var h={},g=[];var f=function(j,i){a.each(j,function(k,l){if(a.trim(i.toLowerCase())==a.trim(k.toLowerCase())){i=k;return}});return j[i]};this.Add=function(j,i){h[a.trim(j).toLowerCase()]=i;if(i.init){g.push(i)}};this.Call=function(r){var m,o;if(!r.push){var q=[];for(m=0,o=arguments.length;m<o;m++){q.push(arguments[m])}r=q}var p=this.Component(r[0]);if(!p){return}var k=f(p,r[1]);if(!k){return}var l=r.splice(2,r.length);k.apply(p,l)};this.ContextElement=function(j,i){var k=this.Component(j);if(k){k.context=(!k.singletron?i:k.context)||i;return k.context}return undefined};this.Component=function(i){return h[i.toLowerCase()]};this.init=function(){a.each(g,function(i,j){if(j.init){j.init()}})}});a.extend(e,{version:"0.2.0",base:undefined,init:function(f,g){var h=a('script[src*="plungerjs"]').attr("src");if(f&&h&&h.toLowerCase().indexOf("init=false")>-1){return}if(c.init){return}c.init=true;e.base=g||a("body");d.init()},$:function(f){return e.base.find(f)},ajax:function(f){a.ajax(f)},html:function(f,g){f.html(g);a(e.base).trigger(c.events.update,[f])},parse:function(i,j){if(!i){return undefined}var l;l=isNaN(i)?i:parseFloat(i);l=l==="false"||l==="true"?l=="true":l;if(j&&typeof(l)=="string"){try{var h=/^\[.*?\]$/;var f=h.test(l);if(f){l='{"Array":'+l+"}"}var k=a.parseJSON(l.replace(/'/g,'"'));if(k!=null){l=f?k.Array:k}}catch(g){}}return l},add:function(j,h,i){var f,g;f=new b(j);h.prototype=f;h.prototype.constructor=h;g=new h();d.Add(j,g);if(i){g.base=d.Component(i)}return g},serializeObject2:function(f){var g={};jQuery.map(f.serializeArray(),function(m,k){var h=m.name.indexOf("[");if(h>-1){var p=g;var j=m.name.replace(/\]/gi,"").split("[");for(var k=0,l=j.length;k<l;k++){if(k==l-1){if(p[j[k]]){if(typeof p[j[k]]=="string"){p[j[k]]=[p[j[k]]]}p[j[k]].push(m.value)}else{p[j[k]]=m.value||""}}else{p=p[j[k]]=p[j[k]]||{}}}}else{if(g[m.name]!==undefined){if(!g[m.name].push){g[m.name]=[g[m.name]]}g[m.name].push(m.value||"")}else{g[m.name]=m.value||""}}});return g},serializeObject:function(f){var j=this,g={},i={},h={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};this.build=function(k,l,m){k[l]=m;return k};this.push_counter=function(k){if(i[k]===undefined){i[k]=0}return i[k]++};a.each(f.serializeArray(),function(){if(!h.validate.test(this.name)){return}var l,m=this.name.match(h.key),p=this.name;var o=f.find('input[name="'+this.name+'"]').attr("data-noparse")=="true";var n=!o?e.parse(this.value,true):this.value;n=n==null?"":n;while((l=m.pop())!==undefined){p=p.replace(new RegExp("\\["+l+"\\]$"),"");if(l.match(h.push)){n=j.build([],j.push_counter(p),n)}else{if(l.match(h.fixed)){n=j.build([],l,n)}else{if(l.match(h.named)){n=j.build({},l,n)}}}}g=a.extend(true,g,n)});return g},noElement:function(){return a('<div id="noElement"></div>')}});function b(j){var i=this;this.name=j;this.singletron=false;this.context;this.base;this.aria=function(k,m,n){var l="aria-"+m;return g(k,l,n)};this.param=function(k,m,n){var l="data-"+this.name+"-"+m;return g(k,l,n)};this.target=function(k){var l=k.attr("target")||k.data("target");return f(k,l)};this.element=function(k,l){var m=k.data("element-"+l);return f(k,m)};this.extra=function(l,n){var k="data-"+this.name+"-"+l;var m="["+k+(typeof(n)!="undefined"?"='"+n+"'":"")+"]";return e.$(m)||e.noElement()};this.chain={add:function(k,n,l){var m;if(k){m=k.data("chain-"+n)}else{m=n}if(m&&a.trim(m)!=""){c.callchain(m).add(function(p,o){l(p,o)})}},fire:function(k,m,o,n){var l;if(k){l=k.data("chainfire-"+m)}l=l||m;if(l&&a.trim(l)!=""){c.callchain(l).fire(o,n)}},remove:function(k,m){var l;if(k){l=k.data("chainfire-"+m)}l=l||m;if(l&&a.trim(l)!=""){c.callchain(l).remove()}}};this.events={listener:function(k,m,l){var n=k.data("listener-"+m);if(n){a(e.base).on(n,l);return true}return false},dispatch:function(k,m,l){var q=k.data("event-"+m);if(q){var n=q.split(",");for(var o=0,p=n.length;o<p;o++){a(e.base).trigger(a.trim(n[o]),[l])}}}};var f=function(k,m){var l=e.noElement();if(m){l=(m=="_self"?k.parent():e.$(m))||e.noElement()}return l};var g=function(k,l,m){if(typeof(m)!=="undefined"){k.attr(l,m.toString());return m}m=k.attr(l);return e.parse(m,true)};var h=function(m,l,n,o){var k=function(){return n.apply(m)},p=function(q){o.apply(m,[q])};if(Object.defineProperty){Object.defineProperty(m,l,{get:k,set:p})}else{m.__defineGetter__(l,k);m.__defineSetter__(l,p)}}}a(document).ready(function(){e.init(true,a("body"))});e.add("render",function(){var h=this,f=false;var j=function(k){var l=k.data("render").split(" ");for(var m=0,n=l.length;m<n;m++){d.ContextElement(l[m],k);d.Call(l[m],"render",k)}};var i=function(k){var l=k.data("render-delay");if(!l){j(k)}else{setTimeout(function(){j(k)},l)}};var g=function(k,m){var l=m?k.add(k.find("[data-render]")):k.find("[data-render]");l.each(function(){var n=a(this).data("render-listener");if(!n){i(a(this))}else{a(e.base).on(n,a(this),(function(o,p){return function(q){i(o)}})(a(this),n))}})};this.init=function(){if(f){return}f=true;a(e.base).on(c.events.update,function(l,k,m){g(k,m)});g(e.base)}});e.add("route",function(){var g=this,f=false;var i,j;this.init=function(){if(f){return}f=true;a(window).on("hashchange",function(){g.CallModule()});g.CallModule()};this.CallModule=function(){h();if(!i){return}a.each(i,function(k,l){d.Call(l.split("/"))})};var h=function(){var k=location.href.replace(window.location.origin,"");var l=/[\w/]+/g;var m=k.indexOf("#");i=m>=0?k.substring(m).match(l):[];var n=m>=0?m:k.length;j=a.trim(k.substring(0,n))||"/"}});e.add("action",function(){var i=this,f=false;var h=["click"];this.init=function(){if(f){return}f=true;a.each(h,function(k,j){g(j)})};var g=function(j){a(document).on(j,"[data-action]",function(l){var k=a(l.target);var o=k.data("action");if(!o){k=k.closest("[data-action]");o=k.data("action")}if(o){var p=o.split(" ");for(var m=0,n=p.length;m<n;m++){d.ContextElement(p[m],k);d.Call(p[m],l.type,k)}l.preventDefault();return}})}})})(window.PlungerJs=window.PlungerJs||{},jQuery);(function(b,a){b.add("ajaxlink",function(){var c=this;this._load=function(d,g){c.events.dispatch(d,"start");var e=c.target(d);var f=c.param(d,"datatype")||"html";var h={type:"GET",dataType:f,url:d.attr("href")||c.param(d,"href"),cache:c.param(d,"cache"),success:function(k,l,m){var i=a("<html />").html(k);var j=a(i).find("body").length>0?a(i).find("body").html():k;b.html(e,j)},complete:function(){c.events.dispatch(d,"end")}};b.ajax(a.extend(h,g))};this.click=function(d){c._load(d)};this.load=function(e){var d=b.$('a[data-action="'+c.name+'"][id="'+e+'"]');c._load(d)};this.render=function(d){c._load(d)};return this})})(PlungerJs,jQuery);