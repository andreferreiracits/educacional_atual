Type.registerNamespace("Sys.Mvc");Sys.Mvc.$create_AjaxOptions=function Sys_Mvc_AjaxOptions(){return{}};Sys.Mvc.InsertionMode=function(){};Sys.Mvc.InsertionMode.prototype={replace:0,insertBefore:1,insertAfter:2};Sys.Mvc.InsertionMode.registerEnum("Sys.Mvc.InsertionMode",false);Sys.Mvc.AjaxContext=function Sys_Mvc_AjaxContext(c,d,b,a){this._request=c;this._updateTarget=d;this._loadingElement=b;this._insertionMode=a};Sys.Mvc.AjaxContext.prototype={_insertionMode:0,_loadingElement:null,_response:null,_request:null,_updateTarget:null,get_data:function Sys_Mvc_AjaxContext$get_data(){if(this._response){return this._response.get_responseData()}else{return null}},get_insertionMode:function Sys_Mvc_AjaxContext$get_insertionMode(){return this._insertionMode},get_loadingElement:function Sys_Mvc_AjaxContext$get_loadingElement(){return this._loadingElement},get_object:function Sys_Mvc_AjaxContext$get_object(){var a=this.get_response();return(a)?a.get_object():null},get_response:function Sys_Mvc_AjaxContext$get_response(){return this._response},set_response:function Sys_Mvc_AjaxContext$set_response(a){this._response=a;return a},get_request:function Sys_Mvc_AjaxContext$get_request(){return this._request},get_updateTarget:function Sys_Mvc_AjaxContext$get_updateTarget(){return this._updateTarget}};Sys.Mvc.AsyncHyperlink=function Sys_Mvc_AsyncHyperlink(){};Sys.Mvc.AsyncHyperlink.handleClick=function Sys_Mvc_AsyncHyperlink$handleClick(c,a,b){a.preventDefault();Sys.Mvc.MvcHelpers._asyncRequest(c.href,"post","",c,b)};Sys.Mvc.MvcHelpers=function Sys_Mvc_MvcHelpers(){};Sys.Mvc.MvcHelpers._serializeSubmitButton=function Sys_Mvc_MvcHelpers$_serializeSubmitButton(d,a,h){if(d.disabled){return null}var b=d.name;if(b){var c=d.tagName.toUpperCase();var g=encodeURIComponent(b);var f=d;if(c==="INPUT"){var e=f.type;if(e==="submit"){return g+"="+encodeURIComponent(f.value)}else{if(e==="image"){return g+".x="+a+"&"+g+".y="+h}}}else{if((c==="BUTTON")&&(b.length)&&(f.type==="submit")){return g+"="+encodeURIComponent(f.value)}}}return null};Sys.Mvc.MvcHelpers._serializeForm=function Sys_Mvc_MvcHelpers$_serializeForm(b){var f=b.elements;var g=new Sys.StringBuilder();var o=f.length;for(var k=0;k<o;k++){var l=f[k];var a=l.name;if(!a||!a.length){continue}var d=l.tagName.toUpperCase();if(d==="INPUT"){var q=l;var p=q.type;if((p==="text")||(p==="password")||(p==="hidden")||(((p==="checkbox")||(p==="radio"))&&l.checked)){g.append(encodeURIComponent(a));g.append("=");g.append(encodeURIComponent(q.value));g.append("&")}}else{if(d==="SELECT"){var n=l;var m=n.options.length;for(var h=0;h<m;h++){var e=n.options[h];if(e.selected){g.append(encodeURIComponent(a));g.append("=");g.append(encodeURIComponent(e.value));g.append("&")}}}else{if(d==="TEXTAREA"){g.append(encodeURIComponent(a));g.append("=");g.append(encodeURIComponent((l.value)));g.append("&")}}}}var c=b._additionalInput;if(c){g.append(c);g.append("&")}return g.toString()};Sys.Mvc.MvcHelpers._asyncRequest=function Sys_Mvc_MvcHelpers$_asyncRequest(c,d,i,k,e){if(e.confirm){if(!confirm(e.confirm)){return}}if(e.url){c=e.url}if(e.httpMethod){d=e.httpMethod}if(i.length>0&&!i.endsWith("&")){i+="&"}i+="X-Requested-With=XMLHttpRequest";var a=d.toUpperCase();var l=(a==="GET"||a==="POST");if(!l){i+="&";i+="X-HTTP-Method-Override="+a}var g="";if(a==="GET"||a==="DELETE"){if(c.indexOf("?")>-1){if(!c.endsWith("&")){c+="&"}c+=i}else{c+="?";c+=i}}else{g=i}var f=new Sys.Net.WebRequest();f.set_url(c);if(l){f.set_httpVerb(d)}else{f.set_httpVerb("POST");f.get_headers()["X-HTTP-Method-Override"]=a}f.set_body(g);if(d.toUpperCase()==="PUT"){f.get_headers()["Content-Type"]="application/x-www-form-urlencoded;"}f.get_headers()["X-Requested-With"]="XMLHttpRequest";var j=null;if(e.updateTargetId){j=$get(e.updateTargetId)}var m=null;if(e.loadingElementId){m=$get(e.loadingElementId)}var h=new Sys.Mvc.AjaxContext(f,j,m,e.insertionMode);var b=true;if(e.onBegin){b=e.onBegin(h)!==false}if(m){Sys.UI.DomElement.setVisible(h.get_loadingElement(),true)}if(b){f.add_completed(Function.createDelegate(null,function(n){Sys.Mvc.MvcHelpers._onComplete(f,e,h)}));f.invoke()}};Sys.Mvc.MvcHelpers._onComplete=function Sys_Mvc_MvcHelpers$_onComplete(request,ajaxOptions,ajaxContext){ajaxContext.set_response(request.get_executor());if(ajaxOptions.onComplete&&ajaxOptions.onComplete(ajaxContext)===false){return}var statusCode=ajaxContext.get_response().get_statusCode();if((statusCode>=200&&statusCode<300)||statusCode===304||statusCode===1223){if(statusCode!==204&&statusCode!==304&&statusCode!==1223){var contentType=ajaxContext.get_response().getResponseHeader("Content-Type");if((contentType)&&(contentType.indexOf("application/x-javascript")!==-1)){eval(ajaxContext.get_data())}else{Sys.Mvc.MvcHelpers.updateDomElement(ajaxContext.get_updateTarget(),ajaxContext.get_insertionMode(),ajaxContext.get_data())}}if(ajaxOptions.onSuccess){ajaxOptions.onSuccess(ajaxContext)}}else{if(ajaxOptions.onFailure){ajaxOptions.onFailure(ajaxContext)}}if(ajaxContext.get_loadingElement()){Sys.UI.DomElement.setVisible(ajaxContext.get_loadingElement(),false)}};Sys.Mvc.MvcHelpers.updateDomElement=function Sys_Mvc_MvcHelpers$updateDomElement(c,a,b){if(c){switch(a){case Sys.Mvc.InsertionMode.replace:c.innerHTML=b;break;case Sys.Mvc.InsertionMode.insertBefore:if(b&&b.length>0){c.innerHTML=b+c.innerHTML.trimStart()}break;case Sys.Mvc.InsertionMode.insertAfter:if(b&&b.length>0){c.innerHTML=c.innerHTML.trimEnd()+b}break}}};Sys.Mvc.AsyncForm=function Sys_Mvc_AsyncForm(){};Sys.Mvc.AsyncForm.handleClick=function Sys_Mvc_AsyncForm$handleClick(b,a){var c=Sys.Mvc.MvcHelpers._serializeSubmitButton(a.target,a.offsetX,a.offsetY);b._additionalInput=c};Sys.Mvc.AsyncForm.handleSubmit=function Sys_Mvc_AsyncForm$handleSubmit(f,b,d){b.preventDefault();var c=f.validationCallbacks;if(c){for(var e=0;e<c.length;e++){var g=c[e];if(!g()){return}}}var a=Sys.Mvc.MvcHelpers._serializeForm(f);Sys.Mvc.MvcHelpers._asyncRequest(f.action,f.method||"post",a,f,d)};Sys.Mvc.AjaxContext.registerClass("Sys.Mvc.AjaxContext");Sys.Mvc.AsyncHyperlink.registerClass("Sys.Mvc.AsyncHyperlink");Sys.Mvc.MvcHelpers.registerClass("Sys.Mvc.MvcHelpers");Sys.Mvc.AsyncForm.registerClass("Sys.Mvc.AsyncForm");