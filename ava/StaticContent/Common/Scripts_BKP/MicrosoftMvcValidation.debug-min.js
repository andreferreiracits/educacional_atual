Type.registerNamespace("Sys.Mvc");Sys.Mvc.$create_Validation=function Sys_Mvc_Validation(){return{}};Sys.Mvc.$create_JsonValidationField=function Sys_Mvc_JsonValidationField(){return{}};Sys.Mvc.$create_JsonValidationOptions=function Sys_Mvc_JsonValidationOptions(){return{}};Sys.Mvc.$create_JsonValidationRule=function Sys_Mvc_JsonValidationRule(){return{}};Sys.Mvc.$create_ValidationContext=function Sys_Mvc_ValidationContext(){return{}};Sys.Mvc.NumberValidator=function Sys_Mvc_NumberValidator(){};Sys.Mvc.NumberValidator.create=function Sys_Mvc_NumberValidator$create(a){return Function.createDelegate(new Sys.Mvc.NumberValidator(),new Sys.Mvc.NumberValidator().validate)};Sys.Mvc.NumberValidator.prototype={validate:function Sys_Mvc_NumberValidator$validate(b,a){if(Sys.Mvc._validationUtil.stringIsNullOrEmpty(b)){return true}var c=Number.parseLocale(b);return(!isNaN(c))}};Sys.Mvc.FormContext=function Sys_Mvc_FormContext(b,a){this._errors=[];this.fields=new Array(0);this._formElement=b;this._validationSummaryElement=a;b[Sys.Mvc.FormContext._formValidationTag]=this;if(a){var c=a.getElementsByTagName("ul");if(c.length>0){this._validationSummaryULElement=c[0]}}this._onClickHandler=Function.createDelegate(this,this._form_OnClick);this._onSubmitHandler=Function.createDelegate(this,this._form_OnSubmit)};Sys.Mvc.FormContext._Application_Load=function Sys_Mvc_FormContext$_Application_Load(){var b=window.mvcClientValidationMetadata;if(b){while(b.length>0){var a=b.pop();Sys.Mvc.FormContext._parseJsonOptions(a)}}};Sys.Mvc.FormContext._getFormElementsWithName=function Sys_Mvc_FormContext$_getFormElementsWithName(e,b){var f=[];var a=document.getElementsByName(b);for(var c=0;c<a.length;c++){var d=a[c];if(Sys.Mvc.FormContext._isElementInHierarchy(e,d)){Array.add(f,d)}}return f};Sys.Mvc.FormContext.getValidationForForm=function Sys_Mvc_FormContext$getValidationForForm(a){return a[Sys.Mvc.FormContext._formValidationTag]};Sys.Mvc.FormContext._isElementInHierarchy=function Sys_Mvc_FormContext$_isElementInHierarchy(a,b){while(b){if(a===b){return true}b=b.parentNode}return false};Sys.Mvc.FormContext._parseJsonOptions=function Sys_Mvc_FormContext$_parseJsonOptions(p){var n=$get(p.FormId);var h=(!Sys.Mvc._validationUtil.stringIsNullOrEmpty(p.ValidationSummaryId))?$get(p.ValidationSummaryId):null;var f=new Sys.Mvc.FormContext(n,h);f.enableDynamicValidation();f.replaceValidationSummary=p.ReplaceValidationSummary;for(var e=0;e<p.Fields.length;e++){var m=p.Fields[e];var b=Sys.Mvc.FormContext._getFormElementsWithName(n,m.FieldName);var l=(!Sys.Mvc._validationUtil.stringIsNullOrEmpty(m.ValidationMessageId))?$get(m.ValidationMessageId):null;var o=new Sys.Mvc.FieldContext(f);Array.addRange(o.elements,b);o.validationMessageElement=l;o.replaceValidationMessageContents=m.ReplaceValidationMessageContents;for(var d=0;d<m.ValidationRules.length;d++){var k=m.ValidationRules[d];var a=Sys.Mvc.ValidatorRegistry.getValidator(k);if(a){var c=Sys.Mvc.$create_Validation();c.fieldErrorMessage=k.ErrorMessage;c.validator=a;Array.add(o.validations,c)}}o.enableDynamicValidation();Array.add(f.fields,o)}var g=n.validationCallbacks;if(!g){g=[];n.validationCallbacks=g}g.push(Function.createDelegate(null,function(){return Sys.Mvc._validationUtil.arrayIsNullOrEmpty(f.validate("submit"))}));return f};Sys.Mvc.FormContext.prototype={_onClickHandler:null,_onSubmitHandler:null,_submitButtonClicked:null,_validationSummaryElement:null,_validationSummaryULElement:null,_formElement:null,replaceValidationSummary:false,addError:function Sys_Mvc_FormContext$addError(a){this.addErrors([a])},addErrors:function Sys_Mvc_FormContext$addErrors(a){if(!Sys.Mvc._validationUtil.arrayIsNullOrEmpty(a)){Array.addRange(this._errors,a);this._onErrorCountChanged()}},clearErrors:function Sys_Mvc_FormContext$clearErrors(){Array.clear(this._errors);this._onErrorCountChanged()},_displayError:function Sys_Mvc_FormContext$_displayError(){if(this._validationSummaryElement){if(this._validationSummaryULElement){Sys.Mvc._validationUtil.removeAllChildren(this._validationSummaryULElement);for(var a=0;a<this._errors.length;a++){var b=document.createElement("li");Sys.Mvc._validationUtil.setInnerText(b,this._errors[a]);this._validationSummaryULElement.appendChild(b)}}Sys.UI.DomElement.removeCssClass(this._validationSummaryElement,Sys.Mvc.FormContext._validationSummaryValidCss);Sys.UI.DomElement.addCssClass(this._validationSummaryElement,Sys.Mvc.FormContext._validationSummaryErrorCss)}},_displaySuccess:function Sys_Mvc_FormContext$_displaySuccess(){var a=this._validationSummaryElement;if(a){var b=this._validationSummaryULElement;if(b){b.innerHTML=""}Sys.UI.DomElement.removeCssClass(a,Sys.Mvc.FormContext._validationSummaryErrorCss);Sys.UI.DomElement.addCssClass(a,Sys.Mvc.FormContext._validationSummaryValidCss)}},enableDynamicValidation:function Sys_Mvc_FormContext$enableDynamicValidation(){Sys.UI.DomEvent.addHandler(this._formElement,"click",this._onClickHandler);Sys.UI.DomEvent.addHandler(this._formElement,"submit",this._onSubmitHandler)},_findSubmitButton:function Sys_Mvc_FormContext$_findSubmitButton(b){if(b.disabled){return null}var a=b.tagName.toUpperCase();var d=b;if(a==="INPUT"){var c=d.type;if(c==="submit"||c==="image"){return d}}else{if((a==="BUTTON")&&(d.type==="submit")){return d}}return null},_form_OnClick:function Sys_Mvc_FormContext$_form_OnClick(a){this._submitButtonClicked=this._findSubmitButton(a.target)},_form_OnSubmit:function Sys_Mvc_FormContext$_form_OnSubmit(c){var b=c.target;var a=this._submitButtonClicked;if(a&&a.disableValidation){return}var d=this.validate("submit");if(!Sys.Mvc._validationUtil.arrayIsNullOrEmpty(d)){c.preventDefault()}},_onErrorCountChanged:function Sys_Mvc_FormContext$_onErrorCountChanged(){if(!this._errors.length){this._displaySuccess()}else{this._displayError()}},validate:function Sys_Mvc_FormContext$validate(b){var a=this.fields;var f=[];for(var c=0;c<a.length;c++){var d=a[c];var e=d.validate(b);if(e){Array.addRange(f,e)}}if(this.replaceValidationSummary){this.clearErrors();this.addErrors(f)}return f}};Sys.Mvc.FieldContext=function Sys_Mvc_FieldContext(a){this._errors=[];this.elements=new Array(0);this.validations=new Array(0);this.formContext=a;this._onBlurHandler=Function.createDelegate(this,this._element_OnBlur);this._onChangeHandler=Function.createDelegate(this,this._element_OnChange);this._onInputHandler=Function.createDelegate(this,this._element_OnInput);this._onPropertyChangeHandler=Function.createDelegate(this,this._element_OnPropertyChange)};Sys.Mvc.FieldContext.prototype={_onBlurHandler:null,_onChangeHandler:null,_onInputHandler:null,_onPropertyChangeHandler:null,defaultErrorMessage:null,formContext:null,replaceValidationMessageContents:false,validationMessageElement:null,addError:function Sys_Mvc_FieldContext$addError(a){this.addErrors([a])},addErrors:function Sys_Mvc_FieldContext$addErrors(a){if(!Sys.Mvc._validationUtil.arrayIsNullOrEmpty(a)){Array.addRange(this._errors,a);this._onErrorCountChanged()}},clearErrors:function Sys_Mvc_FieldContext$clearErrors(){Array.clear(this._errors);this._onErrorCountChanged()},_displayError:function Sys_Mvc_FieldContext$_displayError(){var a=this.validationMessageElement;if(a){if(this.replaceValidationMessageContents){Sys.Mvc._validationUtil.setInnerText(a,this._errors[0])}Sys.UI.DomElement.removeCssClass(a,Sys.Mvc.FieldContext._validationMessageValidCss);Sys.UI.DomElement.addCssClass(a,Sys.Mvc.FieldContext._validationMessageErrorCss)}var d=this.elements;for(var c=0;c<d.length;c++){var b=d[c];Sys.UI.DomElement.removeCssClass(b,Sys.Mvc.FieldContext._inputElementValidCss);Sys.UI.DomElement.addCssClass(b,Sys.Mvc.FieldContext._inputElementErrorCss)}},_displaySuccess:function Sys_Mvc_FieldContext$_displaySuccess(){var a=this.validationMessageElement;if(a){if(this.replaceValidationMessageContents){Sys.Mvc._validationUtil.setInnerText(a,"")}Sys.UI.DomElement.removeCssClass(a,Sys.Mvc.FieldContext._validationMessageErrorCss);Sys.UI.DomElement.addCssClass(a,Sys.Mvc.FieldContext._validationMessageValidCss)}var d=this.elements;for(var c=0;c<d.length;c++){var b=d[c];Sys.UI.DomElement.removeCssClass(b,Sys.Mvc.FieldContext._inputElementErrorCss);Sys.UI.DomElement.addCssClass(b,Sys.Mvc.FieldContext._inputElementValidCss)}},_element_OnBlur:function Sys_Mvc_FieldContext$_element_OnBlur(a){if(a.target[Sys.Mvc.FieldContext._hasTextChangedTag]||a.target[Sys.Mvc.FieldContext._hasValidationFiredTag]){this.validate("blur")}},_element_OnChange:function Sys_Mvc_FieldContext$_element_OnChange(a){a.target[Sys.Mvc.FieldContext._hasTextChangedTag]=true},_element_OnInput:function Sys_Mvc_FieldContext$_element_OnInput(a){a.target[Sys.Mvc.FieldContext._hasTextChangedTag]=true;if(a.target[Sys.Mvc.FieldContext._hasValidationFiredTag]){this.validate("input")}},_element_OnPropertyChange:function Sys_Mvc_FieldContext$_element_OnPropertyChange(a){if(a.rawEvent.propertyName==="value"){a.target[Sys.Mvc.FieldContext._hasTextChangedTag]=true;if(a.target[Sys.Mvc.FieldContext._hasValidationFiredTag]){this.validate("input")}}},enableDynamicValidation:function Sys_Mvc_FieldContext$enableDynamicValidation(){var d=this.elements;for(var b=0;b<d.length;b++){var a=d[b];if(Sys.Mvc._validationUtil.elementSupportsEvent(a,"onpropertychange")){var c=document.documentMode;if(c&&c>=8){Sys.UI.DomEvent.addHandler(a,"propertychange",this._onPropertyChangeHandler)}}else{Sys.UI.DomEvent.addHandler(a,"input",this._onInputHandler)}Sys.UI.DomEvent.addHandler(a,"change",this._onChangeHandler);Sys.UI.DomEvent.addHandler(a,"blur",this._onBlurHandler)}},_getErrorString:function Sys_Mvc_FieldContext$_getErrorString(a,c){var b=c||this.defaultErrorMessage;if(Boolean.isInstanceOfType(a)){return(a)?null:b}if(String.isInstanceOfType(a)){return((a).length)?a:b}return null},_getStringValue:function Sys_Mvc_FieldContext$_getStringValue(){var a=this.elements;return(a.length>0)?a[0].value:null},_markValidationFired:function Sys_Mvc_FieldContext$_markValidationFired(){var c=this.elements;for(var b=0;b<c.length;b++){var a=c[b];a[Sys.Mvc.FieldContext._hasValidationFiredTag]=true}},_onErrorCountChanged:function Sys_Mvc_FieldContext$_onErrorCountChanged(){if(!this._errors.length){this._displaySuccess()}else{this._displayError()}},validate:function Sys_Mvc_FieldContext$validate(f){var c=this.validations;var h=[];var j=this._getStringValue();for(var e=0;e<c.length;e++){var d=c[e];var a=Sys.Mvc.$create_ValidationContext();a.eventName=f;a.fieldContext=this;a.validation=d;var b=d.validator(j,a);var g=this._getErrorString(b,d.fieldErrorMessage);if(!Sys.Mvc._validationUtil.stringIsNullOrEmpty(g)){Array.add(h,g)}}this._markValidationFired();this.clearErrors();this.addErrors(h);return h}};Sys.Mvc.RangeValidator=function Sys_Mvc_RangeValidator(a,b){this._minimum=a;this._maximum=b};Sys.Mvc.RangeValidator.create=function Sys_Mvc_RangeValidator$create(c){var b=c.ValidationParameters.minimum;var a=c.ValidationParameters.maximum;return Function.createDelegate(new Sys.Mvc.RangeValidator(b,a),new Sys.Mvc.RangeValidator(b,a).validate)};Sys.Mvc.RangeValidator.prototype={_minimum:null,_maximum:null,validate:function Sys_Mvc_RangeValidator$validate(b,a){if(Sys.Mvc._validationUtil.stringIsNullOrEmpty(b)){return true}var c=Number.parseLocale(b);return(!isNaN(c)&&this._minimum<=c&&c<=this._maximum)}};Sys.Mvc.RegularExpressionValidator=function Sys_Mvc_RegularExpressionValidator(a){this._pattern=a};Sys.Mvc.RegularExpressionValidator.create=function Sys_Mvc_RegularExpressionValidator$create(b){var a=b.ValidationParameters.pattern;return Function.createDelegate(new Sys.Mvc.RegularExpressionValidator(a),new Sys.Mvc.RegularExpressionValidator(a).validate)};Sys.Mvc.RegularExpressionValidator.prototype={_pattern:null,validate:function Sys_Mvc_RegularExpressionValidator$validate(d,b){if(Sys.Mvc._validationUtil.stringIsNullOrEmpty(d)){return true}var a=new RegExp(this._pattern);var c=a.exec(d);return(!Sys.Mvc._validationUtil.arrayIsNullOrEmpty(c)&&c[0].length===d.length)}};Sys.Mvc.RequiredValidator=function Sys_Mvc_RequiredValidator(){};Sys.Mvc.RequiredValidator.create=function Sys_Mvc_RequiredValidator$create(a){return Function.createDelegate(new Sys.Mvc.RequiredValidator(),new Sys.Mvc.RequiredValidator().validate)};Sys.Mvc.RequiredValidator._isRadioInputElement=function Sys_Mvc_RequiredValidator$_isRadioInputElement(a){if(a.tagName.toUpperCase()==="INPUT"){var b=(a.type).toUpperCase();if(b==="RADIO"){return true}}return false};Sys.Mvc.RequiredValidator._isSelectInputElement=function Sys_Mvc_RequiredValidator$_isSelectInputElement(a){if(a.tagName.toUpperCase()==="SELECT"){return true}return false};Sys.Mvc.RequiredValidator._isTextualInputElement=function Sys_Mvc_RequiredValidator$_isTextualInputElement(a){if(a.tagName.toUpperCase()==="INPUT"){var b=(a.type).toUpperCase();switch(b){case"TEXT":case"PASSWORD":case"FILE":return true}}if(a.tagName.toUpperCase()==="TEXTAREA"){return true}return false};Sys.Mvc.RequiredValidator._validateRadioInput=function Sys_Mvc_RequiredValidator$_validateRadioInput(c){for(var b=0;b<c.length;b++){var a=c[b];if(a.checked){return true}}return false};Sys.Mvc.RequiredValidator._validateSelectInput=function Sys_Mvc_RequiredValidator$_validateSelectInput(a){for(var c=0;c<a.length;c++){var b=a[c];if(b.selected){if(!Sys.Mvc._validationUtil.stringIsNullOrEmpty(b.value)){return true}}}return false};Sys.Mvc.RequiredValidator._validateTextualInput=function Sys_Mvc_RequiredValidator$_validateTextualInput(a){return(!Sys.Mvc._validationUtil.stringIsNullOrEmpty(a.value))};Sys.Mvc.RequiredValidator.prototype={validate:function Sys_Mvc_RequiredValidator$validate(c,a){var b=a.fieldContext.elements;if(!b.length){return true}var d=b[0];if(Sys.Mvc.RequiredValidator._isTextualInputElement(d)){return Sys.Mvc.RequiredValidator._validateTextualInput(d)}if(Sys.Mvc.RequiredValidator._isRadioInputElement(d)){return Sys.Mvc.RequiredValidator._validateRadioInput(b)}if(Sys.Mvc.RequiredValidator._isSelectInputElement(d)){return Sys.Mvc.RequiredValidator._validateSelectInput((d).options)}return true}};Sys.Mvc.StringLengthValidator=function Sys_Mvc_StringLengthValidator(b,a){this._minLength=b;this._maxLength=a};Sys.Mvc.StringLengthValidator.create=function Sys_Mvc_StringLengthValidator$create(c){var b=c.ValidationParameters.minimumLength;var a=c.ValidationParameters.maximumLength;return Function.createDelegate(new Sys.Mvc.StringLengthValidator(b,a),new Sys.Mvc.StringLengthValidator(b,a).validate)};Sys.Mvc.StringLengthValidator.prototype={_maxLength:0,_minLength:0,validate:function Sys_Mvc_StringLengthValidator$validate(b,a){if(Sys.Mvc._validationUtil.stringIsNullOrEmpty(b)){return true}return(this._minLength<=b.length&&b.length<=this._maxLength)}};Sys.Mvc._validationUtil=function Sys_Mvc__validationUtil(){};Sys.Mvc._validationUtil.arrayIsNullOrEmpty=function Sys_Mvc__validationUtil$arrayIsNullOrEmpty(a){return(!a||!a.length)};Sys.Mvc._validationUtil.stringIsNullOrEmpty=function Sys_Mvc__validationUtil$stringIsNullOrEmpty(a){return(!a||!a.length)};Sys.Mvc._validationUtil.elementSupportsEvent=function Sys_Mvc__validationUtil$elementSupportsEvent(a,b){return(b in a)};Sys.Mvc._validationUtil.removeAllChildren=function Sys_Mvc__validationUtil$removeAllChildren(a){while(a.firstChild){a.removeChild(a.firstChild)}};Sys.Mvc._validationUtil.setInnerText=function Sys_Mvc__validationUtil$setInnerText(a,b){var c=document.createTextNode(b);Sys.Mvc._validationUtil.removeAllChildren(a);a.appendChild(c)};Sys.Mvc.ValidatorRegistry=function Sys_Mvc_ValidatorRegistry(){};Sys.Mvc.ValidatorRegistry.getValidator=function Sys_Mvc_ValidatorRegistry$getValidator(b){var a=Sys.Mvc.ValidatorRegistry.validators[b.ValidationType];return(a)?a(b):null};Sys.Mvc.ValidatorRegistry._getDefaultValidators=function Sys_Mvc_ValidatorRegistry$_getDefaultValidators(){return{required:Function.createDelegate(null,Sys.Mvc.RequiredValidator.create),stringLength:Function.createDelegate(null,Sys.Mvc.StringLengthValidator.create),regularExpression:Function.createDelegate(null,Sys.Mvc.RegularExpressionValidator.create),range:Function.createDelegate(null,Sys.Mvc.RangeValidator.create),number:Function.createDelegate(null,Sys.Mvc.NumberValidator.create)}};Sys.Mvc.NumberValidator.registerClass("Sys.Mvc.NumberValidator");Sys.Mvc.FormContext.registerClass("Sys.Mvc.FormContext");Sys.Mvc.FieldContext.registerClass("Sys.Mvc.FieldContext");Sys.Mvc.RangeValidator.registerClass("Sys.Mvc.RangeValidator");Sys.Mvc.RegularExpressionValidator.registerClass("Sys.Mvc.RegularExpressionValidator");Sys.Mvc.RequiredValidator.registerClass("Sys.Mvc.RequiredValidator");Sys.Mvc.StringLengthValidator.registerClass("Sys.Mvc.StringLengthValidator");Sys.Mvc._validationUtil.registerClass("Sys.Mvc._validationUtil");Sys.Mvc.ValidatorRegistry.registerClass("Sys.Mvc.ValidatorRegistry");Sys.Mvc.FormContext._validationSummaryErrorCss="validation-summary-errors";Sys.Mvc.FormContext._validationSummaryValidCss="validation-summary-valid";Sys.Mvc.FormContext._formValidationTag="__MVC_FormValidation";Sys.Mvc.FieldContext._hasTextChangedTag="__MVC_HasTextChanged";Sys.Mvc.FieldContext._hasValidationFiredTag="__MVC_HasValidationFired";Sys.Mvc.FieldContext._inputElementErrorCss="input-validation-error";Sys.Mvc.FieldContext._inputElementValidCss="input-validation-valid";Sys.Mvc.FieldContext._validationMessageErrorCss="field-validation-error";Sys.Mvc.FieldContext._validationMessageValidCss="field-validation-valid";Sys.Mvc.ValidatorRegistry.validators=Sys.Mvc.ValidatorRegistry._getDefaultValidators();Sys.Application.add_load(function(){Sys.Application.remove_load(arguments.callee);Sys.Mvc.FormContext._Application_Load()});