(function(d){d.cluetip={version:"1.0.6"};var e,g,G,r,B,C,p,D;d.fn.cluetip=function(b,S){"object"==typeof b&&(S=b,b=null);return"destroy"==b?this.removeData("thisInfo").unbind(".cluetip"):this.each(function(Y){function Z(){return false}var j=this,c=d(this),a=d.extend(true,{},d.fn.cluetip.defaults,S||{},d.metadata?c.metadata():d.meta?c.data():{}),H=false,P=+a.cluezIndex;c.data("thisInfo",{title:j.title,zIndex:P});var y=false,T=0;if(!d("#cluetip").length){d('<div id="cluetip"><div id="cluetip-outer"><h3 id="cluetip-title"></h3><div id="cluetip-inner"></div></div><div id="cluetip-extra"></div><div id="cluetip-arrows" class="cluetip-arrows"></div></div>')[U](V).hide(); e=d("#cluetip").css({position:"absolute"});G=d("#cluetip-outer").css({position:"relative",zIndex:P});g=d("#cluetip-inner");r=d("#cluetip-title");B=d("#cluetip-arrows");C=d('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(e).hide()}var W=a.dropShadow?+a.dropShadowSteps:0;if(!p){p=d([]);for(var I=0;I<W;I++)p=p.add(d("<div></div>").css({zIndex:P-1,opacity:0.1,top:1+I,left:1+I}));p.css({position:"absolute",backgroundColor:"#000"}).prependTo(e)}var l=c.attr(a.attribute),J= a.cluetipClass;if(!l&&!a.splitTitle&&!b)return true;a.local&&a.localPrefix&&(l=a.localPrefix+l);a.local&&a.hideLocal&&d(l+":first").hide();var q=parseInt(a.topOffset,10),v=parseInt(a.leftOffset,10),m,Q,K=isNaN(parseInt(a.height,10))?"auto":/\D/g.test(a.height)?a.height:a.height+"px",L,s,h,E,M,R=parseInt(a.width,10)||275,k=R+(parseInt(e.css("paddingLeft"),10)||0)+(parseInt(e.css("paddingRight"),10)||0)+W,F=this.offsetWidth,t,i,n,z,A,o=a.attribute!="title"?c.attr(a.titleAttribute):"";if(a.splitTitle){o== void 0&&(o="");A=o.split(a.splitTitle);o=A.shift()}a.escapeTitle&&(o=o.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var N=function(f){if(!a.onActivate(c))return false;y=true;e.removeClass().css({width:R});l==c.attr("href")&&c.css("cursor",a.cursor);a.hoverClass&&c.addClass(a.hoverClass);s=c.offset().top;t=c.offset().left;n=f.pageX;E=f.pageY;if(j.tagName.toLowerCase()!="area"){L=d(document).scrollTop();z=d(window).width()}if(a.positionBy=="fixed"){i=F+t+v;e.css({left:i})}else{i= F>t&&t>k||t+F+k+v>z?t-k-v:F+t+v;if(j.tagName.toLowerCase()=="area"||a.positionBy=="mouse"||F+k>z)if(n+20+k>z){e.addClass(" cluetip-"+J);i=n-k-v>=0?n-k-v-parseInt(e.css("marginLeft"),10)+parseInt(g.css("marginRight"),10):n-k/2}else i=n+v;var w=i<0?f.pageY+q:f.pageY;e.css({left:i>0&&a.positionBy!="bottomTop"?i:n+k/2>z?z/2-k/2:Math.max(n-k/2,0),zIndex:c.data("thisInfo").zIndex});B.css({zIndex:c.data("thisInfo").zIndex+1})}Q=d(window).height();if(b){typeof b=="function"&&(b=b.call(j));g.html(b);x(w)}else if(A){f= A.length;g.html(f?A[0]:"");if(f>1)for(var h=1;h<f;h++)g.append('<div class="split-body">'+A[h]+"</div>");x(w)}else if(!a.local&&l.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(l)){g.html('<img src="'+l+'" alt="'+o+'" />');x(w)}else if(H&&a.ajaxCache){g.html(H);x(w)}else{var m=a.ajaxSettings.beforeSend,p=a.ajaxSettings.error,r=a.ajaxSettings.success,u=a.ajaxSettings.complete,f=d.extend(true,{},a.ajaxSettings,{cache:false,url:l,beforeSend:function(f){m&&m.call(j,f,e,g);G.children().empty();a.waitImage&& C.css({top:E+20,left:n+20,zIndex:c.data("thisInfo").zIndex-1}).show()},error:function(a,f){y&&(p?p.call(j,a,f,e,g):g.html("<i>sorry, the contents could not be loaded</i>"))},success:function(f,c){H=a.ajaxProcess.call(j,f);if(y){r&&r.call(j,f,c,e,g);g.html(H)}},complete:function(a,f){u&&u.call(j,a,f,e,g);var c=g[0].getElementsByTagName("img");D=c.length;for(var b=0,h=c.length;b<h;b++)c[b].complete&&D--;if(D&&!d.browser.opera)d(c).bind("load error",function(){D--;if(D<1){C.hide();y&&x(w)}});else{C.hide(); y&&x(w)}}});d.ajax(f)}else if(a.local){f=d(l+(/#\S+$/.test(l)?"":":eq("+Y+")")).clone(true).show();g.html(f);x(w)}},x=function(f){e.addClass("cluetip-"+J);if(a.truncate){var b=g.text().slice(0,a.truncate)+"...";g.html(b)}o?r.show().html(o):a.showTitle?r.show().html("&nbsp;"):r.hide();if(a.sticky){b=d('<div id="cluetip-close"><a href="#">'+a.closeText+"</a></div>");a.closePosition=="bottom"?b.appendTo(g):a.closePosition=="title"?b.prependTo(r):b.prependTo(g);b.bind("click.cluetip",function(){u();return false}); a.mouseOutClose?e.bind("mouseleave.cluetip",function(){u()}):e.unbind("mouseleave.cluetip")}b="";G.css({zIndex:c.data("thisInfo").zIndex,overflow:K=="auto"?"visible":"auto",height:K});m=K=="auto"?Math.max(e.outerHeight(),e.height()):parseInt(K,10);h=s;M=L+Q;if(a.positionBy=="fixed")h=s-a.dropShadowSteps+q;else if(i<n&&Math.max(i,0)+k>n||a.positionBy=="bottomTop")if(s+m+q>M&&E-L>m+q){h=E-m-q;b="top"}else{h=E+q;b="bottom"}else h=s+m+q>M?m>=Q?L:M-m-q:c.css("display")=="block"||j.tagName.toLowerCase()== "area"||a.positionBy=="mouse"?f-q:s-a.dropShadowSteps;b==""&&(i<t?b="left":b="right");e.css({top:h+"px"}).removeClass().addClass("clue-"+b+"-"+J).addClass(" cluetip-"+J);if(a.arrows){f=s-h-a.dropShadowSteps;B.css({top:/(left|right)/.test(b)&&i>=0&&f>0?f+"px":/(left|right)/.test(b)?0:""}).show()}else B.hide();p.hide();e.hide()[a.fx.open](a.fx.openSpeed||0);a.dropShadow&&p.css({height:m,width:R,zIndex:c.data("thisInfo").zIndex-1}).show();d.fn.bgiframe&&e.bgiframe();a.delayedClose>0&&(T=setTimeout(u, a.delayedClose));a.onShow.call(j,e,g)},O=function(){y=false;C.hide();if(!a.sticky||/click|toggle/.test(a.activation)){u();clearTimeout(T)}a.hoverClass&&c.removeClass(a.hoverClass)},u=function(){G.parent().hide().removeClass();a.onHide.call(j,e,g);c.removeClass("cluetip-clicked");o&&c.attr(a.titleAttribute,o);c.css("cursor","");a.arrows&&B.css({top:""})};d(document).bind("hideCluetip",function(){u()});if(/click|toggle/.test(a.activation))c.bind("click.cluetip",function(a){if(e.is(":hidden")||!c.is(".cluetip-clicked")){N(a); d(".cluetip-clicked").removeClass("cluetip-clicked");c.addClass("cluetip-clicked")}else O(a);this.blur();return false});else if(a.activation=="focus"){c.bind("focus.cluetip",function(a){N(a)});c.bind("blur.cluetip",function(a){O(a)})}else{c[a.clickThrough?"unbind":"bind"]("click",Z);var X=function(b){if(a.tracking==true){var d=i-b.pageX,g=h?h-b.pageY:s-b.pageY;c.bind("mousemove.cluetip",function(a){e.css({left:a.pageX+d,top:a.pageY+g})})}};d.fn.hoverIntent&&a.hoverIntent?c.hoverIntent({sensitivity:a.hoverIntent.sensitivity, interval:a.hoverIntent.interval,over:function(a){N(a);X(a)},timeout:a.hoverIntent.timeout,out:function(a){O(a);c.unbind("mousemove.cluetip")}}):c.bind("mouseenter.cluetip",function(a){N(a);X(a)}).bind("mouseleave.cluetip",function(a){O(a);c.unbind("mousemove.cluetip")});c.bind("mouseover.cluetip",function(){c.attr("title","")}).bind("mouseleave.cluetip",function(){c.attr("title",c.data("thisInfo").title)})}})};d.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15, leftOffset:15,local:!1,localPrefix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!1,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){}, onHide:function(){},ajaxCache:!0,ajaxProcess:function(b){return b=b.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1};var U="appendTo",V="body";d.cluetip.setup=function(b){b&&b.insertionType&&b.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/)&&(U=b.insertionType);b&&b.insertionElement&&(V=b.insertionElement)}})(jQuery);