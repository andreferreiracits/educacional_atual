function removeClassList() { $("div#icons").removeAttr("class") } function carregaProfessoresAluno(a) { a > 0 && $.ajax({ type: "POST", url: "/AVA/Caminhos/home/SelecionaProfessoresByAluno", data: { id: a }, success: function (a) { if (a = a.trim(), ";" == a.substring(0, 1) && (a = a.substring(1, a.lenght)), $("#selProfessor").html(""), $("#selProfessor").append('<option value="0">Todos os professores</option> '), listaProfs = a.split(";"), a.indexOf(";") > -1) for (i = 0; i < listaProfs.length; i++) prof = listaProfs[i].split(","), idProf = prof[0], nomeProf = prof[1], $("#selProfessor").append('<option value="' + idProf + '">' + nomeProf + "</option> "); else a.indexOf(",") > -1 && (prof = a.split(","), idProf = prof[0], nomeProf = prof[1], $("#selProfessor").append('<option value="' + idProf + '">' + nomeProf + "</option> ")) }, error: function (a) { 0 != a.status && console.debug("Nao foi possivel obter os professores") } }) } function onCloseRealizacao(a, e) { verificaAvaliacaoConcluida(e) } function abreAvaliacao(a) { "True" === $("#tab-1").find("#thFluxoPrincipal .btn_verde_min").attr("tipopapel") || "True" === $("#tab-6").find("#thFluxoPrincipal .btn_verde_min").attr("tipopapel") ? window.open("/AVA/avaliacoes/Realizacao/visualizarRealizada/" + a, "VisualizaProva", "width=800, height=600, scrollbars=1") : window.open("/AVA/avaliacoes/Realizacao/index/" + a, "RealizacaoProva", "width=800, height=600, scrollbars=1") } function verificaAvaliacaoConcluida(a) { $(".cont_central_ativ").each(function () { if ($(this).attr("intAgend") == a) { var e = ($(this), $(this).attr("idAtividade")), t = $(this).attr("intAgend"); return jQuery.ajax({ url: "/AVA/Caminhos/Home/VerificaAvaliacaoConcluida", data: { idAvaliacao: e, intOrdemAgendamento: t }, cache: !1, async: !1, success: function (e) { if (0 != e) { var t = jQuery.parseJSON(e); 1 == t.showNota && 1 == t.provaStatus && $(".cont_central_ativ").each(function () { $(this).attr("intAgend") == a && "Resultado" != $(this).find("td.td_status").text() && ($(this).find("td.td_status").removeClass("td_status_emandamento").addClass("td_status_correcao").html("<span>Resultado</span>"), $(this).find("h2.statusAval").html('Finalizada <i class="_fiz FontAwesome"></i>'), $(this).find("a.btn_verde_min.disp_iblock").html("visualizar"), $(this).find("span.e-actions").removeAttr("style"), $(this).find("h2").each(function () { var a = $(this).text(), e = t.nota.toFixed(2); e = e.replace(".", ","), a.indexOf("--") > 0 && (a = a.replace("--", "<span>" + e + "</span>"), a = a.replace("Nota", "<span>Nota</span>"), $(this).html(a)) })) }), 0 == t.showNota && 1 == t.provaStatus && $(".cont_central_ativ").each(function () { $(this).attr("intAgend") == a && ($(this).find("td.td_status").removeClass("td_status_emandamento").addClass("td_status_encerrado ").html("<span>Encerrada</span>"), $(this).find("h2.statusAval").html('Finalizada <i class="_fiz FontAwesome"></i>'), $(this).find("a.btn_verde_min.disp_iblock").html("visualizar"), $(this).find("span.e-actions").removeAttr("style")) }) } }, error: function (a) { console.log(a.status) } }), !1 } }) } function exibeAtividadesPendentes() { if (this.checked) { $("#embreve").attr("disabled", !0).attr("checked", !1), $("#aberta").attr("disabled", !0).attr("checked", !0), $("#encerrado").attr("disabled", !0).attr("checked", !1), $("#resultados").attr("disabled", !0).attr("checked", !1), $("#naorealizada").attr("disabled", !0).attr("checked", !1), $("#embreve").parent().removeClass("inputCheckboxChecked").addClass("checkdisabled"), $("#aberta").parent().addClass("checkdisabled").addClass("inputCheckboxChecked"), $("#encerrado").parent().removeClass("inputCheckboxChecked").addClass("checkdisabled"), $("#resultados").parent().removeClass("inputCheckboxChecked").addClass("checkdisabled"), $("#naorealizada").parent().removeClass("inputCheckboxChecked").addClass("checkdisabled"); var a = new Date, e = a.getDate(), t = a.getMonth() + 1, i = a.getFullYear(); 10 > e && (e = "0" + e), 10 > t && (t = "0" + t), a = e + "/" + t + "/" + i; var o = new Date((new Date).getTime() + 6048e5), r = o.getDate(), s = o.getMonth() + 1, n = o.getFullYear(); 10 > r && (r = "0" + r), 10 > s && (s = "0" + s), o = r + "/" + s + "/" + n, $("#dataInicio").val(a).attr("disabled", !0), $("#dataFim").val(o).attr("disabled", !0) } else $("#embreve").attr("disabled", !1), $("#aberta").attr("disabled", !1), $("#encerrado").attr("disabled", !1).attr("checked", !0), $("#resultados").attr("disabled", !1).attr("checked", !0), $("#naorealizada").attr("disabled", !1), $("#embreve").parent().removeClass("checkdisabled").addClass("inputCheckboxChecked"), $("#aberta").parent().removeClass("checkdisabled").addClass("inputCheckboxChecked"), $("#encerrado").parent().removeClass("checkdisabled").addClass("inputCheckboxChecked"), $("#resultados").parent().removeClass("checkdisabled").addClass("inputCheckboxChecked"), $("#naorealizada").parent().removeClass("checkdisabled"), $("#dataInicio").val("").attr("disabled", !1), $("#dataFim").val("").attr("disabled", !1) } function abreListaAtividadeAluno(a, e, t, i, o, r, s, n) { "" == r && "" == s && ($hoje = new Date, r = $hoje.getFullYear() + "-01-01", s = $hoje.getFullYear() + "-12-31"), strTipoAtividadeGlobal = e, strAtividadeGlobal = t, strStatusAtividadeGlobal = i, dtmInicioAgendamentoGlobal = r, dtmFimAgendamentoGlobal = s, bolFiltrandoGlobal = n, idProfessorGlobal = o, "" != a && (idAlunoGlobal = a), rodarGlobal = 1, paginacaoAtividadeAluno() } function paginacaoAtividadeAluno() { $.ajax({ type: "POST", url: "/AVA/Caminhos/home/BancoAtividadesAlunoTotal", data: { idAluno: idAlunoGlobal, tipoAtividade: strTipoAtividadeGlobal, strAtividade: strAtividadeGlobal, strStatus: strStatusAtividadeGlobal, idProfessor: idProfessorGlobal, dtmInicio: dtmInicioAgendamentoGlobal, dtmFim: dtmFimAgendamentoGlobal }, success: function (a) { sSelected = ""; var e = parseInt(a); if (e > 10 && ($("#mostraComboPaginas").show(), intExibirPorPagina = Math.ceil(e / 10), intExibirPorPagina > 1)) for ($("#" + tabDefault).find("#exibirPaginas").html(""), $i = 1; $i <= intExibirPorPagina; $i++) $i < 6 && ($valorPPagina = 10 * $i, $strValorPPAgina = "Exibir " + $valorPPagina + " por página", quantidadePorPagina == $valorPPagina ? sSelected = "selected " : sSelected = "", $("#" + tabDefault).find("#exibirPaginas").append('<option value="' + $valorPPagina + '" ' + sSelected + ">" + $strValorPPAgina + "</option>")); $("#" + tabDefault).find("#Pagination").pagination(e, { items_per_page: quantidadePorPagina, num_display_entries: 5, current_page: 0, num_edge_entries: 1, link_to: "javascript:void(0);", callback: retornaPaginaAtividadeAluno }), $("#" + tabDefault).find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), quantidadePorPagina >= e ? ($("#mostraComboPaginas").hide(), $("#mostraPaginas").hide(), $("#tab-6").find("#mostraComboPaginas").hide(), $("#tab-6").find("#mostraPaginas").hide()) : ($("#mostraComboPaginas").show(), $("#mostraPaginas").show(), $("#tab-6").find("#mostraComboPaginas").show(), $("#tab-6").find("#mostraPaginas").show()) }, error: function (a) { 0 != a.status && console.debug("Nao foi possivel obter o numero de resultados") } }) } function retornaPaginaAtividadeAluno(a) { void 0 == a && (a = 1), rodarGlobal > 0 && retornaAtividadesAlunoPaginando(a), rodarGlobal += 1 } function retornaAtividadesAlunoPaginando(a) { $("#" + tabDefault).find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), a += 1; var e = quantidadePorPagina * a, t = e - quantidadePorPagina + 1; $(".cont_central_ativ").remove(), montaCampoData("#dataInicio", "#dataFim"), $.ajax({ type: "POST", contentType: "application/x-www-form-urlencoded; charset=UTF-8", url: "/AVA/Caminhos/Home/BancoAtividadesAlunoPaginando", data: { idAluno: $.trim(idAlunoGlobal), tipoAtividade: strTipoAtividadeGlobal, strAtividade: strAtividadeGlobal, strStatus: strStatusAtividadeGlobal, idProfessor: idProfessorGlobal, dtmInicio: dtmInicioAgendamentoGlobal, dtmFim: dtmFimAgendamentoGlobal, inicio: t, fim: e, ordernar: ordernarGlobal, bolOrdenar: bolOrdernarGlobal, atpendentes: $("#atividadespendentes").attr("checked") }, success: function (a) { "1,2,3,4,5" == strStatusAtividadeGlobal ? ($("#tab-6").find("#thFluxoPrincipal").html(""), $("#tab-6").find("#thFluxoPrincipal").append(a)) : ($("#tab-1").find("#thFluxoPrincipal").html(""), $("#tab-1").find("#thFluxoPrincipal").append(a)), a.indexOf("realizadasChecked") > -1 ? ($("#show-realizadas").find('input[type="checkbox"]').prop("disabled", !1), $(".mostrar-realizadas").attr("checked", !0), $(".margin-right").css("cursor", "").css("color", "")) : ($("#show-realizadas").find('input[type="checkbox"]').prop("disabled", !0), $(".mostrar-realizadas").attr("checked", !1), $(".margin-right").css("cursor", "default").css("color", "#b4b4b4")), $(".mostrar-realizadas").is(":checked") ? $("#tab-1").find(".realizadasChecked").show() : $("#tab-1").find(".realizadasChecked").hide(), a.indexOf("Não há") > -1 ? ($("#tab-1").find("thead").hide(), $("#tab-6").find("thead").hide()) : ($("#tab-1").find("thead").show(), $("#tab-6").find("thead").show()), 0 == $("#selProfessor").val() && carregaProfessoresAluno(idAlunoGlobal) }, error: function (a) { 0 != a.status && console.debug("erro ao buscar atividades do aluno!") } }) } function limparFiltroAluno() { $("#strPesquisa").val(""), $("#dataInicio").val(""), $("#dataFim").val(""), $.datepicker._clearDate("#dataInicio"), $.datepicker._clearDate("#dataFim"), $("#selProfessor").val(0), $("#dataInicio").val("").attr("disabled", !1), $("#dataFim").val("").attr("disabled", !1), removeClassList(), $("div.t-conteudo").attr("idtemp", "0"), $(".t-conteudo").text("Todas as atividades"), $("#icons").addClass("todas-t"), idProfessorGlobal = 0, strNomeProfessorGlobal = "" } function filtrarAtividadesCentralizado() { var a = "", e = "", t = ""; if (a = $(".t-conteudo").attr("idtemp"), $(".default-tab").each(function () { $(this).hasClass("current") && (t = $(this).attr("id-status")) }), $palavrachave = $("#strPesquisa").val(), $dataInicio = $("#dataInicio").val(), $dataFim = $("#dataFim").val(), $dataInicio.length > 0 && $dataFim.length > 0) { var i = $dataInicio.split("/"); $dataInicio = i[2] + "-" + i[1] + "-" + i[0]; var o = $dataFim.split("/"); if ($dataFim = o[2] + "-" + o[1] + "-" + o[0], i[2] != anoHoje) return alert("A pesquisa deve se limitar a um período no ano corrente."), !1; if (o[2] != anoHoje) return alert("A pesquisa deve se limitar a um período no ano corrente."), !1 } else { if ($dataInicio.length <= 0 && $dataFim.length > 0) return alert("Favor preencher a data inicial!"), !1; if ($dataInicio.length > 0 && $dataFim.length <= 0) return alert("Favor preencher a data final!"), !1 } if (!valida_data($("#dataInicio").val())) return !1; if (!valida_data($("#dataFim").val())) return !1; if ($dataInicio > $dataFim) return alert("Data inicial maior que data final!"), !1; var r = $("#selProfessor").val(); strNomeProfessorGlobal = $("#selProfessor :selected").text(), e = 0 == a ? "1,2,3" : a, abreListaAtividadeAluno(idAlunoGlobal, e, $palavrachave, t, r, $dataInicio, $dataFim, !0) } function montaLajotinhaFiltroCentralizada(a, e, t, i, o, r) { e = e.replace(/,/g, ""), $(".le_filtros").html("<span>Filtrado por: </span>"), "123" == e || "321" == e ? ($(".le_filtros").append('<span class="lajotinha" id="1">Caminhos de aprendizagem<span class="lajo_x FontAwesome"><a href="javascript: void(0);" onclick="excluirFiltroCentralizado(1, 1, 1)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="2">Tarefas<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(2, 1, 2)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="3">Avaliações<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(3, 1, 3)" class=""></a></span></span>')) : "12" == e || "21" == e ? ($(".le_filtros").append('<span class="lajotinha" id="1">Caminhos de aprendizagem<span class="lajo_x FontAwesome"><a href="javascript: void(0);" onclick="excluirFiltroCentralizado(1, 1, 1)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="2">Tarefas<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(2, 1, 2)" class=""></a></span></span>')) : "13" == e || "31" == e ? ($(".le_filtros").append('<span class="lajotinha" id="1">Caminhos de aprendizagem<span class="lajo_x FontAwesome"><a href="javascript: void(0);" onclick="excluirFiltroCentralizado(1, 1, 1)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="3">Avaliações<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(3, 1, 3)" class=""></a></span></span>')) : "23" == e || "32" == e ? ($(".le_filtros").append('<span class="lajotinha" id="2">Tarefas<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(2, 1, 2)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="3">Avaliações<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(3, 1, 3)" class=""></a></span></span>')) : "1" == e ? $(".le_filtros").append('<span class="lajotinha" id="1">Caminhos de aprendizagem<span class="lajo_x FontAwesome"><a href="javascript: void(0);" onclick="excluirFiltroCentralizado(1, 1, 1)" class=""></a></span></span>') : "2" == e ? $(".le_filtros").append('<span class="lajotinha" id="2">Tarefas<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(2, 1, 2)" class=""></a></span></span>') : "3" == e && $(".le_filtros").append('<span class="lajotinha" id="3">Avaliações<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(3, 1, 3)" class=""></a></span></span>'); var s = a.split(","); if (s.length > 0) for (var n = 0; n < s.length; n++) { var l = 1; for ($(".lajotinha").each(function () { l++ }); ; ) { if (!($(".lajotinha").find("span[id=" + l + "]").size() > 0)) break; l++ } var d = ""; switch (parseInt(s[n])) { case 2: d = "Em breve", $(".le_filtros").append('<span class="lajotinha" id="' + l + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 2, 6)" class=""></a></span></span>'); break; case 1: d = "Aberta", $(".le_filtros").append('<span class="lajotinha" id="' + l + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 1, 6)" class=""></a></span></span>'); break; case 3: d = "Encerrada", $(".le_filtros").append('<span class="lajotinha" id="' + l + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 3, 6)" class=""></a></span></span>'); break; case 4: d = "Resultado", $(".le_filtros").append('<span class="lajotinha" id="' + l + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 4, 6)" class=""></a></span></span>'); break; case 5: d = "Não realizada", $(".le_filtros").append('<span class="lajotinha" id="' + l + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 5, 6)" class=""></a></span></span>') } } else { var l = 1; $(".lajotinha span").each(function () { l++ }), $(".le_filtros").append('<span class="lajotinha" id="' + l + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 1, 6)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="' + l++ + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l++ + ', 4, 6)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="' + l++ + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l++ + ', 2, 6)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="' + l++ + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l++ + ', 3, 6)" class=""></a></span></span>'), $(".le_filtros").append('<span class="lajotinha" id="' + l++ + '">' + d + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l++ + ', 5, 6)" class=""></a></span></span>') } if ("" != t) { var l = 0; for ($(".lajotinha span").each(function () { l++ }), l++; ; ) { if (!($(".lajotinha").find("span[id=" + l + "]").size() > 0)) break; l++ } $(".le_filtros").append('<span class="lajotinha" id="' + l + '">' + t + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 2, 4)" class=""></a></span></span>') } if ("" != i && "Todos os professores" != i) { var l = 0; for ($(".lajotinha span").each(function () { l++ }), l++; ; ) { if (!($(".lajotinha").find("span[id=" + l + "]").size() > 0)) break; l++ } $(".le_filtros").append('<span class="lajotinha pessoa_simples" id="' + l + '">' + i + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 2, 7)" class=""></a></span></span>') } if ("" != o && "" != r && ($hoje = new Date, $dtmIni = $hoje.getFullYear() + "-01-01", $dtmFim = $hoje.getFullYear() + "-12-31", o != $dtmIni && r != $dtmFim)) { var l = 0; for ($(".lajotinha span").each(function () { l++ }); ; ) { if (!($(".lajotinha").find("span[id=" + l + "]").size() > 0)) break; l++ } l++; var c = new Date(o); c.setDate(c.getDate() + 1); var h = c.getDate(), p = c.getMonth() + 1, u = c.getFullYear(); 10 > h && (h = "0" + h), 10 > p && (p = "0" + p); var m = new Date(r); m.setDate(m.getDate() + 1); var f = m.getDate(), v = m.getMonth() + 1, b = c.getFullYear(); 10 > f && (f = "0" + f), 10 > v && (v = "0" + v), dataInicial = h + "/" + p + "/" + u, dataFinal = f + "/" + v + "/" + b, $(".le_filtros").append('<span class="lajotinha" id="' + l + '">' + dataInicial + " a " + dataFinal + '<span class="lajo_x FontAwesome"><a  href="javascript: void(0);" onclick="excluirFiltroCentralizado(' + l + ', 3, 5)" class=""></a></span></span>') } } function excluirFiltroCentralizado(a, e, t) { $("#atividadespendentes").attr("checked") && ($("#atividadespendentes").attr("checked", !1), $("#atividadespendentes").parent().removeClass("inputCheckboxChecked"), $("#embreve").attr("disabled", !1), $("#aberta").attr("disabled", !1), $("#encerrado").attr("disabled", !1).attr("checked", !0), $("#resultados").attr("disabled", !1).attr("checked", !0), $("#naorealizada").attr("disabled", !1), $("#embreve").parent().removeClass("checkdisabled").addClass("inputCheckboxChecked"), $("#aberta").parent().removeClass("checkdisabled").addClass("inputCheckboxChecked"), $("#encerrado").parent().removeClass("checkdisabled").addClass("inputCheckboxChecked"), $("#resultados").parent().removeClass("checkdisabled").addClass("inputCheckboxChecked"), $("#naorealizada").parent().removeClass("checkdisabled"), $("#dataInicio").val("").attr("disabled", !1), $("#dataFim").val("").attr("disabled", !1)), 1 != t && 2 != t && 3 != t || (1 == t ? ($("#tipocaminho").parent().removeClass("inputCheckboxChecked"), $("#tipocaminho").attr("checked", !1)) : 2 == t ? ($("#tipotarefa").parent().removeClass("inputCheckboxChecked"), $("#tipotarefa").attr("checked", !1)) : 3 == t && ($("#tipoavaliacao").parent().removeClass("inputCheckboxChecked"), $("#tipoavaliacao").attr("checked", !1))), 4 == t && $("#strPesquisa").val(""), 5 == t && $("#dataInicio, #dataFim").val(""), 6 == t && (1 == e ? ($("#aberta").parent().removeClass("inputCheckboxChecked"), $("#aberta").attr("checked", !1)) : 2 == e ? ($("#embreve").parent().removeClass("inputCheckboxChecked"), $("#embreve").attr("checked", !1)) : 3 == e ? ($("#encerrado").parent().removeClass("inputCheckboxChecked"), $("#encerrado").attr("checked", !1)) : 4 == e ? ($("#resultados").parent().removeClass("inputCheckboxChecked"), $("#resultados").attr("checked", !1)) : ($("#naorealizada").parent().removeClass("inputCheckboxChecked"), $("#naorealizada").attr("checked", !1))), 7 == t && $("#selProfessor").val("0"), $("#" + a).remove(), $(".le_filtros_pesquisaUsuario a.bt_normal").remove(), $(".ava_refresh").length <= 0 && $(".le_filtros").append('<a class="bt_normal right" href="javascript: void(0);" onclick="filtrarAtividadesCentralizado();"><span class="ava_refresh"></span>atualizar filtro</a>') } function montaCampoData(a, e) { $(a).setMask("date"), $(e).setMask("date"), $(a).datepicker({ numberOfMonths: 1, dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $(e).datepicker("option", "minDate", a) }, onClose: function (e) { $(a).html(e + " " + $("#horaInicio").val()) } }), $(e).datepicker({ numberOfMonths: 1, dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (e) { $(a).datepicker("option", "maxDate", e) }, onClose: function (a) { $(e).html(a + " " + $("#horaFim").val()) } }) } function valida_data(a) { if (void 0 !== a && "" != a) { var e = new Array, t = new RegExp("(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[012])/[12][0-9]{3}"); return e = a.split("/"), erro = !1, -1 == a.search(t) ? erro = !0 : (4 == e[1] || 6 == e[1] || 9 == e[1] || 11 == e[1]) && e[0] > 30 ? erro = !0 : 2 == e[1] && (e[0] > 28 && e[2] % 4 != 0 && (erro = !0), e[0] > 29 && e[2] % 4 == 0 && (erro = !0)), e[2] < 1800 ? (alert("O ano deve ser superior a 1800."), !1) : erro ? (alert("Data inválida!"), !1) : !0 } return !0 } function fazerCaminhoTarefa(a) { $.ajax({ url: "/ava/caminhos/home/retornaRotaUsuarioEtapa/", data: { idCaminhoAgendamento: a }, async: !1, success: function (e) { e.split("_"); location.href = "/AVA/Caminhos/home/resumo/" + a }, error: function (a) { 0 != a.status && console.debug(a.status) } }) } function verOrientacoes(a) { $.ajax({ type: "GET", url: $("#btVer_" + a).attr("href"), success: function (a) { $.fancybox(a, { autoSize: !1, width: 685, height: 565, autoResize: !1, fitToView: !1, autoResize: !1, helpers: { overlay: { closeClick: !1, locked: !1} }, afterShow: function () { $(".iframeVideoVimeo").on("load", function () { var a = $f(this), e = !1; a.api("pause"), a.addEvent("ready", function () { a.addEvent("play", function () { e || (e = !0, a.api("pause")) }) }) }) } }) }, error: function (a) { console.debug(a) } }) } var rodarGlobal = 0, quantidadePorPagina = 10, intExibirPorPagina = 1, strTipoAtividadeGlobal = "", strStatusAtividadeGlobal = "", strAtividadeGlobal = "", dtmInicioAgendamentoGlobal = "", dtmFimAgendamentoGlobal = "", bolFiltrandoGlobal = !1, idProfessorGlobal = 0, strNomeProfessorGlobal = "", ordernarGlobal = "", bolOrdernarGlobal = !1, bolSanfo = !0, idAlunoGlobal = 0, tabDefault = "tab-1", hoje = new Date, diaHoje = hoje.getDate(), mesHoje = hoje.getMonth() + 1, anoHoje = hoje.getFullYear(), InicioLimite = "01/01/" + anoHoje, FimLimite = "31/12/" + anoHoje; $(function () {
    function a() { $(".control-buttons button").removeAttr("class").addClass("default-tab") } $("#tab-1").find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), filtrarAtividadesCentralizado(), $("#tab-1").find("#thFluxoPrincipal").on("click", ".detalhes, .verDetalhes", function () { var a = $(this).parents("td.line"); a.hasClass("active") ? ($(this).parents("td.line").removeClass("active"), $(this).parents("td.line").find(".toggle").hide("slow"), a.find(".detalhes").text("ver detalhes")) : ($("td.line").removeClass("active"), $(".toggle").hide("slow"), $(this).parents("td.line").addClass("active"), $(this).parents("td.line").find(".toggle").show("fast"), $(".detalhes").html("ver detalhes"), a.find(".detalhes").text("ocultar detalhes")) }), $("#tab-6").find("#thFluxoPrincipal").on("click", ".detalhes, .verDetalhes", function () { var a = $(this).parents("td.line"); a.hasClass("active") ? ($(this).parents("td.line").removeClass("active"), $(this).parents("td.line").find(".toggle").hide("slow"), a.find(".detalhes").text("ver detalhes")) : ($("td.line").removeClass("active"), $(".toggle").hide("slow"), $(this).parents("td.line").addClass("active"), $(this).parents("td.line").find(".toggle").show("fast"), $(".detalhes").html("ver detalhes"), a.find(".detalhes").text("ocultar detalhes")) }), $(".mostrar-realizadas").click(function () { $count_total = $("#miolo-conteudo > tbody > tr").length, $(this).is(":checked") ? $(".realizadasChecked").each(function () { $(this).closest("table").parent().parent().show(), 2 == $count_total && $(".semConteudoRealizadas").remove() }) : $(".realizadasChecked").each(function () { $(this).closest("table").parent().parent().hide(), 1 == $count_total && $("#thFluxoPrincipal").append('<tr class="semConteudoRealizadas"><td class="border" colspan="3"><table style="width: 100%;"><tr><td width="65%"><h1 class="padding-conteudo">Não há atividades. =)</h1></td></tr></table></td></tr>') }) }), $(".control-buttons button").click(function () { var e = "", t = $(this).attr("id"), i = "", o = "", r = ""; if (i = $(".t-conteudo").attr("idtemp"), $palavrachave = $("#strPesquisa").val(), $dataInicio = $("#dataInicio").val(), $dataFim = $("#dataFim").val(), $dataInicio.length > 0 && $dataFim.length > 0) { var s = $dataInicio.split("/"); $dataInicio = s[2] + "-" + s[1] + "-" + s[0]; var n = $dataFim.split("/"); if ($dataFim = n[2] + "-" + n[1] + "-" + n[0], s[2] != anoHoje) return alert("A pesquisa deve se limitar a um período no ano corrente."), !1; if (n[2] != anoHoje) return alert("A pesquisa deve se limitar a um período no ano corrente."), !1 } else { if ($dataInicio.length <= 0 && $dataFim.length > 0) return alert("Favor preencher a data inicial!"), !1; if ($dataInicio.length > 0 && $dataFim.length <= 0) return alert("Favor preencher a data final!"), !1 } if (!valida_data($("#dataInicio").val())) return !1; if (!valida_data($("#dataFim").val())) return !1; if ($dataInicio > $dataFim) return alert("Data inicial maior que data final!"), !1; var l = $("#selProfessor").val(); strNomeProfessorGlobal = $("#selProfessor :selected").text(), o = 0 == i ? "1,2,3" : i, "" == o ? o = "1,2,3" : o, "" == $palavrachave ? $palavrachave = "" : $palavrachave, "" == l ? l = 0 : l, "" == $dataInicio ? $dataInicio = "" : $dataInicio, "" == $dataFim ? $dataFim = "" : $dataFim, "aberta" == t ? (e = "btn-primary", a(), $(this).addClass("btn-primary"), $(".default-tab").each(function () { $(this).hasClass("btn-primary") && (r = $(this).attr("id-status")) }), tabDefault = "tab-1", quantidadePorPagina = 10, ordernarGlobal = "", bolOrdernarGlobal = !1, $("#tab-1").find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), $("#show-realizadas").show(), "" == r ? r = "1" : r, abreListaAtividadeAluno(idAlunoGlobal, o, $palavrachave, r, l, $dataInicio, $dataFim, !1)) : "resultado" == t ? (e = "btn-resultado", a(), $(this).addClass(e), $(".default-tab").each(function () { $(this).hasClass("btn-resultado") && (r = $(this).attr("id-status")) }), tabDefault = "tab-1", quantidadePorPagina = 10, ordernarGlobal = "", bolOrdernarGlobal = !1, $("#tab-1").find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), $("#show-realizadas").hide(), "" == r ? r = "4" : r, abreListaAtividadeAluno(idAlunoGlobal, o, $palavrachave, r, l, $dataInicio, $dataFim, !1)) : "embreve" == t ? (e = "btn-em-breve", a(), $(this).addClass(e), $(".default-tab").each(function () { $(this).hasClass("btn-em-breve") && (r = $(this).attr("id-status")) }), tabDefault = "tab-1", quantidadePorPagina = 10, ordernarGlobal = "", bolOrdernarGlobal = !1, $("#tab-1").find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), $("#show-realizadas").hide(), "" == r ? r = "2" : r, abreListaAtividadeAluno(idAlunoGlobal, o, $palavrachave, r, l, $dataInicio, $dataFim, !1)) : "encerrada" == t ? (e = "btn-encerradas", a(), $(this).addClass(e), $(".default-tab").each(function () { $(this).hasClass("btn-encerradas") && (r = $(this).attr("id-status")) }), tabDefault = "tab-1", quantidadePorPagina = 10, ordernarGlobal = "", bolOrdernarGlobal = !1, $("#tab-1").find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), $("#show-realizadas").hide(), "" == r ? r = "3" : r, abreListaAtividadeAluno(idAlunoGlobal, o, $palavrachave, r, l, $dataInicio, $dataFim, !1)) : "naorealizada" == t ? (e = "btn-nao-realizadas", a(), $(this).addClass(e), $(".default-tab").each(function () { $(this).hasClass("btn-nao-realizadas") && (r = $(this).attr("id-status")) }), tabDefault = "tab-1", quantidadePorPagina = 10, ordernarGlobal = "", bolOrdernarGlobal = !1, $("#tab-1").find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), $("#show-realizadas").hide(), "" == r ? r = "5" : r, abreListaAtividadeAluno(idAlunoGlobal, o, $palavrachave, r, l, $dataInicio, $dataFim, !1)) : "todos" == t && (e = "btn-todos-os-status", a(), $(this).addClass(e), $(".default-tab").each(function () { $(this).hasClass("btn-todos-os-status") && (r = $(this).attr("id-status")) }), tabDefault = "tab-6", quantidadePorPagina = 10, ordernarGlobal = "", bolOrdernarGlobal = !1, $("#tab-6").find("#thFluxoPrincipal").html("<tr><td colspan='5' align='center'><img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' /></td></tr>"), $("#show-realizadas").hide(), "" == r ? r = "1,2,3,4,5" : r, abreListaAtividadeAluno(idAlunoGlobal, o, $palavrachave, r, l, $dataInicio, $dataFim, !1)) }), $(".ordem-hover").hover(function () { $(this).find("i.ordem").css({ opacity: "1.0", filter: "alpha(opacity=100)" }) }, function () { $(this).find("i.ordem").css({ opacity: "0.0", filter: "alpha(opacity=0)" }) }), $(".ordem-hover").on("click", function () { if ($(this).find("i.ordem").toggleClass("ordem-bottom"), $("i.ordem").removeClass("active-ordem"), $(this).find("i.ordem").addClass("active-ordem"), $id = $(this).attr("id"), $(this).find("i.ordem").hasClass("ordem-bottom")) { switch (strTipoOrdenacao = $id, strTipoOrdenacao) { case "orderAtividade": ordernarGlobal = "titulo"; break; case "orderProfessor": ordernarGlobal = "professor"; break; case "orderPeriodo": ordernarGlobal = "datai"; break; case "orderStatus": ordernarGlobal = "status" } bolOrdernarGlobal = !0, filtrarAtividadesCentralizado() } else { switch (strTipoOrdenacao = $id, strTipoOrdenacao) { case "orderAtividade": ordernarGlobal = "titulo"; break; case "orderProfessor": ordernarGlobal = "professor"; break; case "orderPeriodo": ordernarGlobal = "datai"; break; case "orderStatus": ordernarGlobal = "status" } bolOrdernarGlobal = !1, filtrarAtividadesCentralizado() } }), $("ul.nav-ul li").click(function () { var a = $(this).attr("data-nav"); $("ul.nav-ul li").removeClass("current"), $("ul.nav-ul li").removeClass("menu-active"), $(this).addClass("menu-active"), $(".nav-content").removeClass("current"), $(this).addClass("current"), $("#" + a).addClass("current") }), $(".control-buttons button").click(function () { var a = $(this).attr("data-tab"); $(".control-buttons button").removeClass("current"), $(".tab-content").removeClass("current"), $(this).addClass("current"), $("#" + a).addClass("current") }), $(".form-control-icon ul li").click(function () { var a = $(this).attr("id"); "3" == a ? (botao = "avaliacao-t", removeClassList(), $("div#icons").addClass(botao), $("div.t-conteudo").attr("idtemp", a)) : "1" == a ? (botao = "caminho-t", removeClassList(), $("div#icons").addClass(botao), $("div.t-conteudo").attr("idtemp", a)) : "2" == a ? (botao = "tarefa-t", removeClassList(), $("div#icons").addClass(botao), $("div.t-conteudo").attr("idtemp", a)) : (botao = "todas-t", removeClassList(), $("div#icons").addClass(botao), $("div.t-conteudo").attr("idtemp", "0")), $(".t-conteudo").text($(this).text()), filtrarAtividadesCentralizado() }), $(".form-control-icon").click(function () { $(this).hasClass("true") ? ($(this).find("ul.list-dropdown").hide(), $(this).removeClass("true")) : ($(this).addClass("true"), $(this).find("ul.list-dropdown").show()) }), $(".form-control-user").click(function () { $(this).find("ul.list-dropdown-user").toggle(400) }), $(".form-control-user ul li").click(function () { var a = $(this).attr("id"), e = $(this).html(); $("#nomeFilho").html(e), idAlunoGlobal = a, filtrarAtividadesCentralizado() }), $("body").on("click", function (a) { $(a.target).closest(".form-control-icon, ul.list-dropdown").length || $("ul.list-dropdown").hide() }), $("#dataInicio").datepicker({ numberOfMonths: 1, minDate: InicioLimite, maxDate: FimLimite, dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#dataFim").datepicker("option", "minDate", a) }, onClose: function (a) { $("#dataInicio").html(a + " " + $("#horaInicio").val()) } }), $("#dataFim").datepicker({ numberOfMonths: 1, minDate: InicioLimite, maxDate: FimLimite, dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#dataInicio").datepicker("option", "maxDate", a) }, onClose: function (a) { $("#dataFim").html(a + " " + $("#horaFim").val()) } }), $(".filtro_filho").change(function () {
        idAlunoGlobal = $(this).val(), $(".cont_central_ativ").remove(), limparFiltroAluno(), abreListaAtividadeAluno(idAlunoGlobal, "1,2,3", "", "1,2,3,4,5", 0, "", "", !1),
carregaProfessoresAluno(idAlunoGlobal)
    }), $(".b_tooltip_center").each(function () { $(this).tooltip({ offset: [0, 0], opacity: 1, position: "top center", effect: "slide", relative: !0, events: { def: "mouseover, mouseout"} }) }), $("#btnFiltrarAtiv").click(function () { var a = "", e = "", t = ""; if (a = $(".t-conteudo").attr("idtemp"), $(".default-tab").each(function () { $(this).hasClass("current") && (t = $(this).attr("id-status")) }), $palavrachave = $("#strPesquisa").val(), $dataInicio = $("#dataInicio").val(), $dataFim = $("#dataFim").val(), $dataInicio.length > 0 && $dataFim.length > 0) { var i = $dataInicio.split("/"); $dataInicio = i[2] + "-" + i[1] + "-" + i[0]; var o = $dataFim.split("/"); if ($dataFim = o[2] + "-" + o[1] + "-" + o[0], i[2] != anoHoje) return alert("A pesquisa deve se limitar a um período no ano corrente."), !1; if (o[2] != anoHoje) return alert("A pesquisa deve se limitar a um período no ano corrente."), !1 } else { if ($dataInicio.length <= 0 && $dataFim.length > 0) return alert("Favor preencher a data inicial!"), !1; if ($dataInicio.length > 0 && $dataFim.length <= 0) return alert("Favor preencher a data final!"), !1 } if (!valida_data($("#dataInicio").val())) return !1; if (!valida_data($("#dataFim").val())) return !1; if ($dataInicio > $dataFim) return alert("Data inicial maior que data final!"), !1; var r = $("#selProfessor").val(); strNomeProfessorGlobal = $("#selProfessor :selected").text(), e = 0 == a ? "1,2,3" : a, abreListaAtividadeAluno(idAlunoGlobal, e, $palavrachave, t, r, $dataInicio, $dataFim, !0) }), $("#tab-1").find("#exibirPaginas").on("change", function () { quantidadePorPagina = $(this).val(), filtrarAtividadesCentralizado() }), $("#tab-6").find("#exibirPaginas").on("change", function () { quantidadePorPagina = $(this).val(), filtrarAtividadesCentralizado() }), $("#selProfessor").change(function () { filtrarAtividadesCentralizado() })
});