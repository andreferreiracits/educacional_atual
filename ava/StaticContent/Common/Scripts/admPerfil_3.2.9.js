function unloadipad() { bolPassouNoBeforeUnload = !1 } function retornaJson(a) { a.indexOf("idTurma=0") > 0 ? $.getJSON(a, null, function (a) { var e = null; e = a.Result, xmlGlobalEscolaTurmas = a, $("#myContentTemplate").tmpl(a).appendTo("#ava_contentlista"), $("#ava_contentlista #ava_loader").css("display", "none"), $("#txtFiltroAvaTurma").live("keyup", function (a) { if (a.which && 13 == a.which || a.keyCode && 13 == a.keyCode) return a.preventDefault(), !1; $(this).attr("id") ? _id = $(this).attr("id") : _id = 0; var o = "", i = ""; o = $("#escolaRede").size() > 0 ? $("#escolaRede").val() : -1, i = $("#unidades").size() > 0 ? $("#unidades").val() : -1; var t = $("#nivelEnsino").val(), n = $("#intAnoSerie").val(); 0 == t && (t = -1), 0 == n && (n = -1), FiltrarTurmaCompleto("#ava_contentlista", e, $(this).val(), o, i, t, n, -1, 0) }), $("#txtFiltroAvaTurma").live("focus", function () { "Pesquisar por turma" == $(this).val() && $(this).val("") }), $("#txtFiltroAvaTurma").live("blur", function () { "" == $(this).val() && $(this).val("Pesquisar por turma") }), $("#minhasOuTodas").change(function (a) { 1 == $(this).val() ? ($("#filtrosEscolaCoord").find("select").attr("disabled", !0), FiltrarTurmaCompleto("#ava_contentlista", e, "", -1, -1, -1, -1, -1, 1)) : ($("#escolaRede").val(0), $("#unidades").val(0), $("#nivelEnsino").val(-1), $("#intAnoSerie").val(0), $("#filtrosEscolaCoord").find("select").first().removeAttr("disabled"), FiltrarTurmaCompleto("#ava_contentlista", e, "", -1, -1, -1, -1, -1, 0)) }), $("#escolaRede").size() > 0 ? idEscola = $("#escolaRede").val() : idEscola = -1, $("#unidades").size() > 0 ? idUnidade = $("#unidades").val() : idUnidade = -1, -1 == idEscola && -1 == idUnidade && ($("#nivelEnsino").removeAttr("disabled"), idEscola = $("#idEscola").val(), $.ajax({ url: "/AVA/Barras/Home/getNivelEnsinoByEscolaOuUnidade?id=" + idEscola + "&intUnidade=0", type: "GET", dataType: "json", success: function (a) { var o = parseInt(a.error); 1 == o ? ($("#nivelEnsino").empty().html('<option value="n/a">Erro</option>'), console.log(a.responseText)) : ($("#nivelEnsino").find("option[value=-1]").attr("selected", !0), $("#nivelEnsino").attr("disabled", !0), $("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), $("#nivelEnsino").removeAttr("disabled"), $("#nivelEnsino").empty().html('<option value="-1">Ensino (Todos)</option>'), $(a.listaEnsino).each(function (a, e) { $("#nivelEnsino").append('<option value="' + e.idEnsino + '">' + e.strEnsino + "</option>") }), $("#listaCarteirinha").empty(), idLoadedGlobal = !1, $("#ava_contentlista").html('<img id="ava_loader" src="/AVA/StaticContent/Common/img/perfil/carregando.gif" border="0" />'), idUnidade = -1, idEnsino = -1, FiltrarTurmaCompleto("#ava_contentlista", e, "", idEscola, idUnidade, idEnsino, -1, -1, 0)) }, error: function (a) { $("#nivelEnsino").empty().html('<option value="n/a">Erro</option>'), console.log(a.reseponseText) } })), $("#escolaRede").change(function (a) { $("#ava_contentlista").html('<img id="ava_loader" src="/AVA/StaticContent/Common/img/perfil/carregando.gif" border="0" />'); var o = parseInt($(this).val()), i = $("#escolaRede option:selected").html(); $("#unidades").size() > 0 ? 0 == o ? ($("#nivelEnsino").find("option[value=-1]").attr("selected", !0), $("#nivelEnsino").attr("disabled", !0), $("#unidades").find("option[value=0]").attr("selected", !0), $("#unidades").attr("disabled", !0), $("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), idLoadedGlobal = !1, FiltrarTurmaCompleto("#ava_contentlista", e, "", -1, -1, -1, -1, -1, 0)) : $.ajax({ url: "/AVA/Barras/Home/getUnidadesByIdEscola?id=" + o, type: "GET", dataType: "json", success: function (a) { var e = parseInt(a.error); 1 == e ? ($("#unidades").empty().html('<option value="n/a">Erro</option>'), console.log(a.responseText)) : ($("#nivelEnsino").find("option[value=-1]").attr("selected", !0), $("#nivelEnsino").attr("disabled", !0), $("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), $("#unidades").empty().html('<option value="0">Unidade (Todas)</option>'), $(a.listaUnidades).each(function (a, e) { $("#unidades").append('<option value="' + e.id + '">' + e.strUnidade + "</option>") })) }, error: function (a) { $("#unidades").empty().html('<option value="n/a">Erro</option>'), console.log(a.responseText) } }) : 0 == o ? ($("#nivelEnsino").find("option[value=-1]").attr("selected", !0), $("#nivelEnsino").attr("disabled", !0), $("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), idLoadedGlobal = !1, FiltrarTurmaCompleto("#ava_contentlista", e, "", -1, -1, -1, -1, -1, 0)) : ($("#listaFiltrados").text(i), $.ajax({ url: "/AVA/Barras/Home/getNivelEnsinoByEscolaOuUnidade?id=" + o + "&intUnidade=0", type: "GET", dataType: "json", success: function (a) { var i = parseInt(a.error); 1 == i ? ($("#nivelEnsino").empty().html('<option value="n/a">Erro</option>'), console.log(a.responseText)) : ($("#nivelEnsino").find("option[value=-1]").attr("selected", !0), $("#nivelEnsino").attr("disabled", !0), $("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), $("#nivelEnsino").removeAttr("disabled"), $("#nivelEnsino").empty().html('<option value="-1">Ensino (Todos)</option>'), $(a.listaEnsino).each(function (a, e) { $("#nivelEnsino").append('<option value="' + e.idEnsino + '">' + e.strEnsino + "</option>") }), $("#listaCarteirinha").empty(), idLoadedGlobal = !1, $("#ava_contentlista").html('<img id="ava_loader" src="/AVA/StaticContent/Common/img/perfil/carregando.gif" border="0" />'), idUnidade = -1, idEnsino = -1, FiltrarTurmaCompleto("#ava_contentlista", e, "", o, idUnidade, idEnsino, -1, -1, 0)) }, error: function (a) { $("#nivelEnsino").empty().html('<option value="n/a">Erro</option>'), console.log(a.reseponseText) } })) }), $("#unidades").change(function (a) { $("#ava_contentlista").html('<img id="ava_loader" src="/AVA/StaticContent/Common/img/perfil/carregando.gif" border="0" />'); var o = parseInt($(this).val()), i = ""; i = $("#escolaRede").size() > 0 ? $("#escolaRede").val() : 0, 0 == o ? ($("#nivelEnsino").find("option[value=-1]").attr("selected", !0), $("#nivelEnsino").attr("disabled", !0), $("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), FiltrarTurmaCompleto("#ava_contentlista", e, "", -1, -1, -1, -1, -1, 0)) : $.ajax({ url: "/AVA/Barras/Home/getNivelEnsinoByEscolaOuUnidade?id=" + i + "&intUnidade=" + o, type: "GET", dataType: "json", success: function (a) { var i = parseInt(a.error); 1 == i ? ($("#nivelEnsino").empty().html('<option value="n/a">Erro</option>'), console.log(a.responseText)) : ($("#nivelEnsino").find("option[value=-1]").attr("selected", !0), $("#nivelEnsino").attr("disabled", !0), $("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), $("#nivelEnsino").removeAttr("disabled"), $("#nivelEnsino").empty().html('<option value="-1">Ensino (Todos)</option>'), $(a.listaEnsino).each(function (a, e) { $("#nivelEnsino").append('<option value="' + e.idEnsino + '">' + e.strEnsino + "</option>") }), idLoadedGlobal = !1, FiltrarTurmaCompleto("#ava_contentlista", e, "", -1, o, -1, -1, -1, 0)) }, error: function (a) { $("#nivelEnsino").empty().html('<option value="n/a">Erro</option>'), console.log(a.reseponseText) } }) }), $("#nivelEnsino").live("change", function (a) { $("#ava_contentlista").html('<img id="ava_loader" src="/AVA/StaticContent/Common/img/perfil/carregando.gif" border="0" />'); var o = parseInt($(this).val()), i = "", t = ""; i = $("#escolaRede").size() > 0 ? $("#escolaRede").val() : 0, t = $("#unidades").size() > 0 ? $("#unidades").val() : 0, 0 == i && 0 == t && ($("#nivelEnsino").removeAttr("disabled"), i = $("#idEscola").val()), -1 == o ? ($("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), idLoadedGlobal = !1, 0 == i && (i = -1), 0 == t && (t = -1), FiltrarTurmaCompleto("#ava_contentlista", e, "", i, t, o, -1, -1, 0)) : $.ajax({ url: "/ava/Barras/home/getAnoSerie?id=" + i + "&idUnidade=" + t + "&idEnsino=" + o, type: "GET", dataType: "json", success: function (a) { var n = parseInt(a.error); 1 == n ? ($("#intAnoSerie").empty().html('<option value="n/a">Erro</option>'), console.log(a)) : ($("#intAnoSerie").find("option[value=0]").attr("selected", !0), $("#intAnoSerie").attr("disabled", !0), $("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), $("#intAnoSerie").removeAttr("disabled"), $("#intAnoSerie").empty().html('<option value="0">Série (Todas)</option>'), $(a.listaSerie).each(function (a, e) { $("#intAnoSerie").append('<option value="' + e.idSerie + '">' + e.strSerie + "</option>") }), idLoadedGlobal = !1, 0 == i && (i = -1), 0 == t && (t = -1), FiltrarTurmaCompleto("#ava_contentlista", e, "", i, t, o, -1, -1, 0)) }, error: function (a) { $("#intAnoSerie").empty().html('<option value="n/a">Erro</option>'), console.log(a.responseText) } }) }), $("#intAnoSerie").live("change", function (a) { $("#ava_contentlista").html('<img id="ava_loader" src="/AVA/StaticContent/Common/img/perfil/carregando.gif" border="0" />'); var o = parseInt($(this).val()), i = $("#nivelEnsino").val(), t = "", n = ""; t = $("#escolaRede").size() > 0 ? $("#escolaRede").val() : 0, n = $("#unidades").size() > 0 ? $("#unidades").val() : 0, 0 == o ? ($("#turmas").find("option[value=0]").attr("selected", !0), $("#turmas").attr("disabled", !0), idLoadedGlobal = !1, todosUsers = !1, 0 == t && (t = -1), 0 == n && (n = -1), 0 == o && (o = -1), FiltrarTurmaCompleto("#ava_contentlista", e, "", t, n, i, o, -1, 0)) : $.ajax({ url: "/ava/Barras/home/getTurmasByEscolaUnidadeEnsinoSerie?id=" + t + "&idUnidade=" + n + "&idEnsino=" + i + "&idSerie=" + o, type: "GET", dataType: "json", success: function (a) { var s = parseInt(a.error); 0 == s ? ($("#turmas").removeAttr("disabled"), $("#turmas").empty().html('<option value="0">Turmas (Todas)</option>'), $(a.listaTurmas).each(function (a, e) { $("#turmas").append('<option value="' + e.id + '">' + e.strNome + "</option>") }), idLoadedGlobal = !1, 0 == t && (t = -1), 0 == n && (n = -1), FiltrarTurmaCompleto("#ava_contentlista", e, "", t, n, i, o, -1, 0)) : 3 == s ? ($("#turmas").attr("disabled", !0), $("#turmas").empty().html('<option value="0">Sem Turmas</option>'), $("#listaCarteirinha").empty().html(a.msg)) : $("#turmas").empty().html('<option value="n/a">' + a.msg + "</option>") }, error: function (a) { console.log(a.responseText), $("#turmas").empty().html('<option value="n/a">Erro</option>') } }) }), $("#turmas").live("change", function (a) { $("#ava_contentlista").html('<img id="ava_loader" src="/AVA/StaticContent/Common/img/perfil/carregando.gif" border="0" />'); var o = $("#intAnoSerie").val(), i = $("#nivelEnsino").val(), t = "", n = ""; t = $("#escolaRede").size() > 0 ? $("#escolaRede").val() : 0, n = $("#unidades").size() > 0 ? $("#unidades").val() : 0; var s = $(this).val(); idLoadedGlobal = !1, todosUsers = !1, 0 == t && (t = -1), 0 == n && (n = -1), FiltrarTurmaCompleto("#ava_contentlista", e, "", t, n, i, o, s, 0) }) }) : $.getJSON(a, null, function (a) { var e = null; e = a.Result, xmlGlobal = e, $("#myContentTemplate").tmpl(a).appendTo("#ava_contentlista"), $("#ava_contentlista #ava_loader").css("display", "none"), $("#txtFiltroAva").live("keyup", function (a) { return a.which && 13 == a.which || a.keyCode && 13 == a.keyCode ? (a.preventDefault(), !1) : ($(this).attr("idusuario") ? _id = $(this).attr("idusuario") : _id = 0, void FiltrarUsuario("#ava_contentlista", e, $(this).val(), _id)) }), $("#txtFiltroAva").live("focus", function () { "Filtrar por nome" == $(this).val() && $(this).val("") }), $("#txtFiltroAva").live("blur", function () { "" == $(this).val() && $(this).val("Filtrar por nome") }) }) } function abrirFecharLinks(a) { var e = $(a); $(".ativarOrdemCategoria").removeClass("inativo"), $(".ativarOrdemCategoria").html('<span class="icone_reordenar"></span> Iniciar ordenação de Categorias').removeClass("helperConcluir"), $(".cancelar_ordenacao").hide(), $(a).closest(".categoriaCont").next().hasClass("linkCont") && ($(a).closest(".categoriaCont").next().is(":visible") ? $(a).closest(".categoriaCont").next().slideUp("fast", function () { e.html('Abrir<span class="FontAwesome abrir"></span>'), $(".linkCont:visible").size() > 0 && $(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }) }) : $(a).closest(".categoriaCont").next().slideDown("fast", function () { e.html('Fechar<span class="FontAwesome"></span>'), $(".linkCont:visible").size() > 0 && $(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }) })) } function gerarSortableLinks() { $(".header_painel .linkCont").sortable({ items: "> .categoriaLink", connectWith: ".linkCont", placeholder: "ui-state-highlight", delay: 150, stop: function (a, e) { $(".linkCont").each(function () { var a = 1; $(this).find(".categoriaLink").each(function () { var e = $(this).closest(".linksCadastrados").attr("id-categoria"); $(this).find(".numeroOrdem").text(a); var o = { idLink: parseInt($(this).attr("id-link")), intOrdem: a, idCategoria: parseInt(e) }; arrayLink.push(o), a++ }) }), $.ajax({ url: "/ava/adminava/linkrapido/alterarOrdemLink", data: { links: JSON.stringify(arrayLink) }, type: "POST", success: function (a) { var e = parseInt(a.error); console.log(e) }, error: function (a) { console.log(a.responseText) } }) } }) } function montaTabs() { $("#tabs").tabs() } function limpaCamposAgenda() { $("#strTipo").val(""), $("#idTipo").val(""), $(".selecionada_cor").remove(), $("input[name=opcao_cor]").each(function () { $(this).removeAttr("checked") }) } function CarregaCorEscola() { $.ajax({ url: "/AVA/AdminAVA/Agenda/ListaCorByIdEscola", type: "POST", async: !0, cache: !1, success: function (a) { var e = a.split(","); e.pop(), $("input[name=opcao_cor]").each(function () { for (var a = $(this).val(), o = 0; o < e.length; o++) a == e[o] && $(this).attr("disabled", "disabled") }) }, error: function (a) { console.debug(a.status) } }) } function listaTipoEventoCor() { $(".cadastro_tipo").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Agenda/ListaEventoTipoCor", type: "POST", async: !0, cache: !1, success: function (a) { $(".cadastro_tipo").html(a) }, error: function (a) { console.debug(a.status) } }) } function selecionaTipoEvento(a, e) { var o = "#strTipoHidden" + a; o = $(o).val(), $("#strTipo").val(o), $("#idTipo").val(a), $(".selecionada_cor").remove(), $("input[name=opcao_cor]").each(function () { var a = $(this).val(); a == e && ($(this).attr("checked", "checked"), $(this).show("slow").parent().prepend("<span class='selecionada_cor'></span>")) }) } function excluirTipoEvento(a) { $.ajax({ url: "/AVA/AdminAVA/Agenda/ValidaEventoExcluidoIdTipo", type: "POST", data: { idTipo: a }, async: !0, cache: !1, success: function (e) { var o = e; 0 == o ? $.ajax({ url: "/AVA/AdminAVA/Agenda/ExcluirEventoTipo", type: "POST", data: { idTipo: a }, async: !0, cache: !1, success: function (a) { jAlert("Tipo de evento excluído.", ""), listaTipoEvento(), limpaCamposAgenda() }, error: function (a) { console.debug(a.status) } }) : jAlert("Tipo de evento não pode ser excluido pois existe evento associado a ele.", "") }, error: function (a) { console.debug(a.status) } }) } function listaTipoEvento() { $(".agenda_painel .tipos_cadastrados").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Agenda/ListaEventoTipo", type: "POST", async: !0, cache: !1, success: function (a) { $(".agenda_painel .tipos_cadastrados").html(a) }, error: function (a) { console.debug(a.status) } }) } function listaRelatorios() { var a = -1; void 0 != $("#cbUnidadeEstatistica").val() && (a = $("#cbUnidadeEstatistica").val()), $("#box_ListarEstatisticas").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Relatorios/Geral", type: "POST", data: { unidade: a, tipo: "dia" }, async: !0, cache: !1, success: function (a) { $("#box_ListarEstatisticas").html(a), montaCampoData(), $("#periodo").click(function () { $("#periodoInicioPainel, #periodoFimPainel").removeAttr("disabled") }), $("#dia,#mes,#semana").click(function () { $("#periodoInicioPainel, #periodoFimPainel").attr("disabled", "disabled").val("") }), $(".btAbreFechaFiltro").toggle(function () { $(".boxFiltro").slideUp(), $(this).html('Abrir<span class="fechado"></span>') }, function () { $(".boxFiltro").slideDown(), $(this).html('Fechar<span class="aberto"></span>') }) }, error: function (a) { console.debug(a.status) } }) } function filtrarRelatorio() { var a = $("#periodoInicioPainel").val(), e = $("#periodoFimPainel").val(), o = -1; void 0 != $("#cbUnidadeEstatistica").val() && (o = $("#cbUnidadeEstatistica").val()); var i = ""; if ($("input:radio[name=rbTipo]").each(function () { $(this).is(":checked") && (i = $(this).val()) }), "periodo" == i) { if ("" == a) return jAlert("Preencha a data de início!", ""), !1; if ("" == e) return jAlert("Preencha a data de final!", ""), !1 } $("#box_ListarEstatisticas").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Relatorios/Geral", type: "POST", data: { unidade: o, tipo: i, dataInicio: a, dataFim: e }, async: !0, cache: !1, success: function (a) { $("#box_ListarEstatisticas").html(a), montaCampoData(), $("#periodo").click(function () { $("#periodoInicioPainel, #periodoFimPainel").removeAttr("disabled") }), $("#dia,#mes,#semana").click(function () { $("#periodoInicioPainel, #periodoFimPainel").attr("disabled", "disabled").val("") }), $(".btAbreFechaFiltro").toggle(function () { $(".boxFiltro").slideUp(), $(this).html('Abrir<span class="fechado"></span>') }, function () { $(".boxFiltro").slideDown(), $(this).html('Fechar<span class="aberto"></span>') }) }, error: function (a) { console.debug(a.status) } }) } function montaCampoData() { $("#periodoInicioPainel").datepicker({ defaultDate: "-3m", numberOfMonths: 3, minDate: "-2M", maxDate: "+0D", dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#periodoFimPainel").datepicker("option", "minDate", a) } }), $("#periodoFimPainel").datepicker({ defaultDate: "-3m", numberOfMonths: 3, minDate: "-2M", maxDate: "+0D", dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#periodoInicioPainel").datepicker("option", "maxDate", a) } }) } function montaCampoDataAvisos() { $("#dtmInicio").datepicker({ numberOfMonths: 1, dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#dtmFim").datepicker("option", "minDate", a) } }), $("#dtmFim").datepicker({ numberOfMonths: 1, dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#dtmInicio").datepicker("option", "maxDate", a) } }), $("#horaInicio").setMask("29:59"), $("#horaFim").setMask("29:59") } function listaMensagem() { bolFezAlteracaoConfiguracoes ? (destinoConfiguracoes = "btnAtualizarDadosMensagens", CustomConfirmConfiguracoes("btnAtualizarDadosMensagens", objetoIdMensagemRapida, 0)) : ($("#box_ListarMensagens").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $("#Pagination").remove(), $.ajax({ url: "/AVA/AdminAVA/Mensagem/Geral", async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, success: function (a) { $("#box_ListarMensagens").html(a), configuracoesIniciaisAbaMensagemAdminAVA() }, error: function (a) { console.debug(a.status) } })) } function configuracoesIniciaisAbaMensagemAdminAVA() { filtrar_mensagem(), opcoes = { bolAluno: !0, bolResponsavel: !0, bolProfessor: !0, bolAdminCoordDiretor: !0, bolEscondeTituloExterno: !0, bolLajota: !0, bolSeletorFinalizar: !1, btnTextoBotaoConclusaoSeletor: "Concluir", botaoConclusao: $("#filtrar_mensagem"), caixaLajotaExterna: $("#lajotas_seletor"), usuarioGrupoAdicionado: function (a, e, o) { arrayUsuarioAux.splice(0, arrayUsuarioAux.length), arrayEntidadeAux.splice(0, arrayEntidadeAux.length); for (var i = 0; i < a.length; i++) arrayUsuarioAux.push(a[i]); for (var i = 0; i < e.length; i++) arrayEntidadeAux.push(e[i]) } }, $("#seletorMensagemAdmin").AvaSelector(opcoes), $("#dtmIniPesq").datepicker({ defaultDate: "-3m", numberOfMonths: 3, minDate: "-2M", maxDate: "+0D", dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#dtmFimPesq").datepicker("option", "minDate", a) } }), $("#dtmFimPesq").datepicker({ defaultDate: "-3m", numberOfMonths: 3, minDate: "-2M", maxDate: "+0D", dateFormat: "dd/mm/yy", dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#dtmIniPesq").datepicker("option", "maxDate", a) } }), $("#dtmIniPesq").mask("99/99/9999"), $("#dtmFimPesq").mask("99/99/9999") } function configuracoes() { $("#tabs-10 .box_admin").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $("#tabs-10 .box_admin").load("/ava/adminava/Home/Configuracoes", function (a, e, o) { "error" == e ? $(this).html("Erro ao carregar") : ($("#unidadesGruposDeTurma").length || carregarNiveisBuscaGrupoDeTurma(0), $("#Pagination").remove(), $(".opcoes_config .styleCheckbox input[type='checkbox']").change(function (a) { $(this).is(":checked") ? ($(this).parent().addClass("inputCheckboxChecked"), $(this).closest(".opcoes_config").prev().find("input[type='checkbox']:first").is(":checked") || $(this).closest(".opcoes_config").prev().find("input[type='checkbox']:first").trigger("click")) : (0 == $(this).closest(".opcoes_config").find("input[type='checkbox']:checked").size() && $(this).closest(".opcoes_config").prev().find("input[type='checkbox']:first").trigger("click"), $(this).parent().removeClass("inputCheckboxChecked")) }), $(".config_admin #ConfigImagens, .config_admin #ConfigVideos, .config_admin #ConfigFiles").change(function (a) { $(this).is(":checked") ? 0 == $(this).closest(".onoff").next().find(".styleCheckbox").find("input:checked").size() && ($(this).closest(".onoff").next().find(".styleCheckbox").addClass("inputCheckboxChecked"), $(this).closest(".onoff").next().find(".styleCheckbox").find("input").prop("checked", !0)) : ($(this).closest(".onoff").next().find(".styleCheckbox").removeClass("inputCheckboxChecked"), $(this).closest(".onoff").next().find(".styleCheckbox").find("input").prop("checked", !1)) }), $(".opcoes_config_bloqueio .styleCheckbox input[type='checkbox']").change(function (a) { $(this).is(":checked") ? ($(this).parent().addClass("inputCheckboxChecked"), $(this).closest(".opcoes_config_bloqueio").prev().find("input[type='checkbox']:first").is(":checked") || $(this).closest(".opcoes_config_bloqueio").prev().find("input[type='checkbox']:first").trigger("click")) : (0 == $(this).closest(".opcoes_config_bloqueio").find("input[type='checkbox']:checked").size() && $(this).closest(".opcoes_config_bloqueio").prev().find("input[type='checkbox']:first").trigger("click"), $(this).parent().removeClass("inputCheckboxChecked")) }), $("#dataInicio").datepicker({ dateFormat: "dd/mm/yy", minDate: 0, dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"], onSelect: function (a) { $("#dataFim").datepicker("option", "minDate", a) } }), $("#dataFim").datepicker({ dateFormat: "dd/mm/yy", minDate: $("#dataInicio").val(), dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"], monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"] }), $("#dataInicio").setMask("date"), $("#dataFim").setMask("date")) }) } function listaMensagemGrupo() { $("#box_ListarMensagensGrupo").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Mensagem/Geral", async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, success: function (a) { $("#box_ListarMensagens").html(a) }, error: function (a) { console.debug(a.status) } }) } function listaAvisos() { $("#box_ListarAviso").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Avisos/Listando", async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, success: function (a) { $("#box_ListarAviso").html(a); var e = { afterShow: function () { montaCampoDataAvisos(), $("#dtmInicio").mask("99/99/9999"), $("#dtmFim").mask("99/99/9999"), $("#horaInicio").mask("99:99"), $("#horaFim").mask("99:99") }, autoSize: !0, autoResize: !0, fitToView: !1, helpers: { overlay: { closeClick: !1, locked: !1} }, type: "ajax" }; lightBoxAVA($("a#editar_aviso"), e) }, error: function (a) { console.debug(a.status) } }) } function listaDenuncias() { $("#box_ListarDenuncia").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Denuncias/Listar", async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, data: { intVisualizada: 0, idUnidade: 0 }, success: function (a) { $("#box_ListarDenuncia").html(a), $(".btAbreFechaFiltro").toggle(function () { $(".boxFiltro").slideUp(), $(this).html('Abrir<span class="fechado"></span>') }, function () { $(".boxFiltro").slideDown(), $(this).html('Fechar<span class="aberto"></span>') }) }, error: function (a) { console.debug(a.status) } }) } function filtrarDenuncia() { var a = -1; isNaN($("#cbUnidadeDenuncia").val()) || (a = $("#cbUnidadeDenuncia").val()); var e = 0; $("input:radio[name=estado_denuncia]").each(function () { $(this).is(":checked") && (e = $(this).val()) }), $("#box_ListarDenuncia").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Denuncias/Listar", async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, data: { intVisualizada: e, idUnidade: a }, success: function (a) { $("#box_ListarDenuncia").html(a), $(".btAbreFechaFiltro").toggle(function () { $(".boxFiltro").slideUp(), $(this).html('Abrir<span class="fechado"></span>') }, function () { $(".boxFiltro").slideDown(), $(this).html('Fechar<span class="aberto"></span>') }) }, error: function (a) { console.debug(a.status) } }) } function listaSuspensos(a) { isNaN($("#cbUnidadeSuspensao").val()) || (a = $("#cbUnidadeSuspensao").val()), $("#box_ListarSuspensos").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Suspensao/Listando", data: { idUnidade: a }, async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, success: function (a) { $("#box_ListarSuspensos").html(a) }, error: function (a) { console.debug(a.status) } }) } function listaAgenda(a) { $("#box_ListarAgenda").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $("#tipo_evento").removeClass("bt_selected"), $.ajax({ url: "/AVA/AdminAVA/Agenda/Listando", async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, data: { strCategoria: a }, success: function (a) { $("#box_ListarAgenda").html(a), $("#lista_agenda").addClass("bt_selected") }, error: function (a) { console.debug(a.status) } }) } function alteraStatusDenuncia(a, e) { $.ajax({ type: "POST", url: "/AVA/AdminAVA/Denuncias/SetarVisualizada", cache: !1, data: { id: a, intVisualizada: e }, async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, success: function (a) { listaDenuncias(1 == e ? 0 : 1) }, error: function (a) { console.debug(a.status) } }) } function gravaAviso() { var a = $("#idBAviso").val(), e = $("#strMensagem").val(), o = $("#dtmInicio").val(), i = $("#horaInicio").val(), t = $("#dtmFim").val(), n = $("#horaFim").val(); if ($("#aviso_style").remove(), papeis = new Array, segmentoSerie = new Array, $("input[type=checkbox][name='papel[]']:checked").each(function () { papeis.push($(this).val()) }), $("input[type=checkbox][name='segmentoSerie[]']:checked").each(function () { segmentoSerie.push($(this).val()) }), segmentoSerie.length > 0) { papeis.push("1000001"); var s = segmentoSerie.toString(), r = !0 } else var r = !1; if (papeis.length > 0) var l = papeis.toString(), c = !0; else var c = !1; if ("" == e || null == e) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Título em branco! Favor preencher.</p></div>'), !1; if ("" == o || null == o) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data inicial em branco! Favor preencher.</p></div>'), !1; if ("" == i || null == i) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora inicial em branco! Favor preencher.</p></div>'), !1; if ("" == t || null == t) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data final em branco! Favor preencher.</p></div>'), !1; if ("" == n || null == n) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data final em branco! Favor preencher.</p></div>'), !1; if (!verifica_hora(i)) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora inicial inválida!</p></div>'), !1; if (!verifica_hora(n)) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora final inválida!</p></div>'), !1; if (!valida_data(o)) return !1; if (!valida_data(t)) return !1; if (o == t && i >= n) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora incial maior ou igual a hora final!</p></div>'), !1; if (c) { r || (s = "0"); var d = o.split("/"); o = d[2] + "-" + d[1] + "-" + d[0]; var u = t.split("/"); return t = u[2] + "-" + u[1] + "-" + u[0], $.ajax({ type: "POST", url: "/AVA/AdminAVA/Avisos/GravarAviso", cache: !1, data: { idBAviso: a, strMensagem: e, dtmInicio: o, horaInicio: i, dtmFim: t, horaFim: n, strPapeis: l, strSegmentosSeries: s }, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", success: function (a) { parent.$.fancybox.close(), listaAvisos() }, error: function (a) { console.debug(a.status) } }), !0 } $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Favor selecionar um papel!</p></div>') } function excluiAviso(a) { $.ajax({ type: "POST", url: "/AVA/AdminAVA/Avisos/Excluir/" + a, async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, success: function (a) { listaAvisos() }, error: function (a) { console.debug(a.status) } }) } function editaAviso() {
    var a = $("#idBAviso").val(), e = $("#strMensagem").val(), o = $("#dtmInicio").val(), i = $("#horaInicio").val(), t = $("#dtmFim").val(), n = $("#horaFim").val(); if ($("#aviso_style").remove(), papeis = new Array, segmentoSerie = new Array, $("input[type=checkbox][name='papel[]']:checked").each(function () {
        papeis.push($(this).val());

    }), $("input[type=checkbox][name='segmentoSerie[]']:checked").each(function () { segmentoSerie.push($(this).val()) }), segmentoSerie.length > 0) { papeis.push("1000001"); var s = segmentoSerie.toString() } else var s = "0"; if (papeis.length > 0) var r = papeis.toString(), l = !0; else var l = !1; if ("" == e || null == e) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Título em branco! Favor preencher.</p></div>'), !1; if ("" == o || null == o) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data inicial em branco! Favor preencher.</p></div>'), !1; if ("" == i || null == i) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora inicial em branco! Favor preencher.</p></div>'), !1; if ("" == t || null == t) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data final em branco! Favor preencher.</p></div>'), !1; if ("" == n || null == n) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data final em branco! Favor preencher.</p></div>'), !1; if (!verifica_hora(i)) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora inicial inválida!</p></div>'), !1; if (!verifica_hora(n)) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora final inválida!</p></div>'), !1; if (!valida_data(o)) return !1; if (!valida_data(t)) return !1; if (o == t && i >= n) return $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora incial maior ou igual a hora final!</p></div>'), !1; if (l) { var c = o.split("/"); o = c[2] + "-" + c[1] + "-" + c[0]; var d = t.split("/"); t = d[2] + "-" + d[1] + "-" + d[0], $.ajax({ type: "POST", url: "/AVA/AdminAVA/Avisos/Editar/", cache: !1, data: { idBAviso: a, strMensagem: e, dtmInicio: o, horaInicio: i, dtmFim: t, horaFim: n, strPapeis: r, strSegmentosSeries: s }, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", success: function (a) { parent.$.fancybox.close(), listaAvisos() }, error: function (a) { console.debug(a.status) } }) } else $("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Favor selecionar um papel!</p></div>')
} function verifica_hora(a) { var e = a.split(":"); return e[0] < 0 || e[0] > 23 || e[1] < 0 || e[1] > 59 ? !1 : !0 } function valida_data(a) { if ("" != a) { var e = new Array, o = new RegExp("(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[012])/[12][0-9]{3}"); return e = a.split("/"), erro = !1, -1 == a.search(o) ? erro = !0 : (4 == e[1] || 6 == e[1] || 9 == e[1] || 11 == e[1]) && e[0] > 30 ? erro = !0 : 2 == e[1] && (e[0] > 28 && e[2] % 4 != 0 && (erro = !0), e[0] > 29 && e[2] % 4 == 0 && (erro = !0)), e[2] < 1800 ? ($("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> O ano deve ser superior a 1800.</p></div>'), !1) : erro ? ($("#alerta_mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data inválida!</p></div>'), !1) : !0 } return !0 } function PegarValoresCheckbox() { if (papeis = new Array, $("input[type=checkbox][name='papel[]']:checked").each(function () { papeis.push($(this).val()) }), papeis.length > 0) var a = (papeis.toString(), !0); else jAlert("Nenhum papel selecionado!", ""); if (segmentacaoSerie = new Array, $("input[type=checkbox][name='segmentSerie[]']:checked").each(function () { segmentacaoSerie.push($(this).val()) }), segmentacaoSerie.length > 0) { segmentacaoSerie.toString() } else jAlert("Nenhuma segmentaçãoSerie selecionada!", ""); 1 == a || alert("Papel em branco!") } function listaAdmins() { $("#box_listaAdms").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Admins/ListaAdmins", type: "POST", success: function (a) { $("#box_listaAdms").html(a), $(".b_tooltip_center").each(function () { $(this).tooltip({ effect: "slide", position: "top center", relative: !0, events: { def: "click, mouseout"} }) }) }, error: function (a) { console.debug(a.status) } }) } function removeAcessoADMRSEducador(a) { a > 0 ? $.ajax({ url: "/AVA/AdminAVA/Admins/RemoverAcessoAdmRS", data: { idUsuario: a }, type: "POST", success: function (e) { $(".info_usuario_cadastrado#" + a).slideUp("slow", function () { $(this).remove() }), $("span.tooltip").css("display", "none") }, error: function (a) { console.debug(a.status) } }) : $("span.tooltip").css("display", "none") } function adicionarAcessoAdmRSEducador(a) { $.ajax({ url: "/AVA/AdminAVA/Admins/AdicionarAcessoAdmRS", data: { idUsuario: a }, type: "POST", success: function (e) { $(".container_educs#" + a).slideUp("slow", function () { $(this).remove(), listaAdmins() }) }, error: function (a) { console.debug(a.status) } }) } function linksRapidos() { $("#box_LinksRapido .header_painel").empty().html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/adminava/linkrapido/getCategoriaeLinks", type: "GET", dataType: "html", cache: !1, success: function (a) { $("#box_LinksRapido .header_painel").empty().html(a), $(".header_painel #todosLinksRapidos").sortable({ items: "> .categoriaSortable", placeholder: "ui-state-highlight", stop: function (a, e) { arrayGlobalCategoria.splice(0, arrayGlobalCategoria.length); var o = 1; $(".categoriaSortable").each(function () { $(this).find(".categoriaCont .numeroOrdem").text(o); var a = { idCategoria: parseInt($(this).attr("id-categoria")), intOrdem: o }; arrayGlobalCategoria.push(a), o++ }) } }), $(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }), gerarSortableLinks() }, error: function (a) { console.log(a.responseText) } }) } function limpaBuscaEducador() { $("#listabuscaeducadores").html(""), $("#strPesquisaEduc").val("") } function buscaEducadoresEscola() { var a = $("#strPesquisaEduc").val(); "" != a && "Digite o nome, login ou apelido do educador desejado." != a ? ($("#listabuscaeducadores").html("<img src='/AVA/StaticContent/Common/img/perfil/carregando.gif' border='0' />"), $.ajax({ url: "/AVA/AdminAVA/Admins/PesquisaEducadores", data: { strPesquisa: a }, type: "POST", success: function (a) { $("#listabuscaeducadores").html(a) }, error: function (a) { console.debug(a.status) } })) : jAlert("Digite o nome, login ou apelido do educador desejado.", "") } function validarSalvarConfigMultimidia(a) { var e = a.ImagemAdministrador.checked ? 1 : 0, o = a.ImagemCoordenador.checked ? 1 : 0, i = a.ImagemProfessor.checked ? 1 : 0, t = a.VideoAdministrador.checked ? 1 : 0, n = a.VideoCoordenador.checked ? 1 : 0, s = a.VideoProfessor.checked ? 1 : 0, r = a.FileAdministrador.checked ? 1 : 0, l = a.FileCoordenador.checked ? 1 : 0, c = a.FileProfessor.checked ? 1 : 0, d = a.action; return $.fancybox.showLoading(), $.ajax({ url: d, type: "POST", dataType: "json", data: { imgAdm: e, imgCoord: o, imgProf: i, vidAdm: t, vidCoord: n, vidProf: s, fileAdm: r, fileCoord: l, fileProf: c }, success: function (a) { var e = parseInt(a.error); 0 != e && alert(a.msg), $.fancybox.hideLoading() }, error: function (a) { console.log(a.responseText), $.fancybox.hideLoading() } }), !1 } function validarsalvarBloqueioDeFerias(a) { var e = document.getElementById("lista_segmento"), o = e.getElementsByTagName("INPUT"), i = new Array, t = 0; for (loop = 0; loop < o.length; loop++) { var n = o[loop]; "checkbox" == n.type && n.checked && (i[t] = parseInt(n.value), t++) } var s = document.getElementById("area_bloqueio_ferias"), r = (s.getElementsByTagName("OPTION"), ""); void 0 != $("#unidadesBloqueio").val() && (r = $("#unidadesBloqueio").val(), r = JSON.stringify(r.split(","))); var l = $("#dataInicio").val(), c = $("#dataFim").val(), d = $("#idAVASegmentacaoBloqueioEditar").val(), u = validaAgendamento(l, c); if (i.length <= 0) return alert("Você precisa indicar qual segmento deseja bloquear a comunicação."), !1; var p = a.action; return "ok" == u ? ($.fancybox.showLoading(), $.ajax({ url: p, type: "POST", data: { idAVASegmentacaoBloqueio: d, strUnidades: r, chkSegmentos: JSON.stringify(i), dataInicio: l, dataFim: c }, success: function (a) { if ("Já existe" == a) alert("Já existe um bloqueio para o nível de ensino selecionado."); else { var e = c.split("/"), o = new Date(e[2], e[1], e[0], 0, 0, 0, 0); o.setDate(o.getDate() + 1); var i = preencheZeros(o.getDate(), 2), t = preencheZeros(o.getMonth(), 2), n = o.getFullYear(), s = i + "/" + t + "/" + n; $(".opcoes_config_botoes").hide(), $(".opcoes_config_bloqueio").hide(), $(".mensagem_confirmacao_bloqueio").show(); var r = "<span class='btn_fechar_mensagem'><a href='javascript: void(0);' class='btn_OcultarMensagemConfirmacaoBloqueio'><i class='fontello icoCancel'></i></a></span><p>O bloqueio foi salvo com sucesso! Este aviso aparecerá para seus alunos durante o bloqueio:</p><p class='texto_bloqueio'>\"Férias! Aproveite para descansar. Quando as aulas retornarem, no dia " + s + ', você poderá voltar a se comunicar pelo Educacional."</p>'; if ($(".mensagem_confirmacao_bloqueio").html(r), 0 == $(".opcoes_config_bloqueados").hasClass("tb_avisos")) { var l = ""; l = void 0 != $("#unidadesBloqueio").val() ? "<table class='tb_avisos' cellspacing='0' cellpadding='0' width='100%' border='0' id='tab_bloqueio_ferias'><thead>    <tr>        <td width='35%'>Unidade</td>        <td width='35%'>Segmento</td>        <td width='20%'>Período</td>        <td width='10%'></td>    </tr></thead> <tbody></tbody></table>" : "<table class='tb_avisos' cellspacing='0' cellpadding='0' width='100%' border='0' id='tab_bloqueio_ferias'><thead>    <tr>        <td width='70%'>Segmento</td>        <td width='20%'>Período</td>        <td width='10%'></td>    </tr></thead> <tbody></tbody></table>", $(".opcoes_config_bloqueados").html(l) } $("#tab_bloqueio_ferias > tbody").html(a) } $.fancybox.hideLoading() }, error: function (a) { console.log(a.responseText), $.fancybox.hideLoading() } })) : (alert(u), $.fancybox.hideLoading()), !1 } function validaAgendamento(a, e) { var o = "ok"; if ("" == a) o = "Você precisa indicar qual será o período de bloqueio."; else if ("" == e) o = "Você precisa indicar qual será o período de bloqueio."; else { 0 == validaData(a) ? o = "Você precisa indicar qual será o período de bloqueio." : 0 == validaData(e) && (o = "Você precisa indicar qual será o período de bloqueio."); var i = a.split("/"), t = i[2] + i[1] + i[0], n = e.split("/"), s = n[2] + n[1] + n[0], r = new Date; r.setFullYear(i[2], i[1] - 1, i[0]); var l = new Date; if (l.setFullYear(n[2], n[1] - 1, n[0]), l.getTime() < r.getTime()) o = "A data final não pode ser anterior à data inicial."; else { var c = $("#dtmAtualServidor").val().split(" "), d = c[0].split("/"), u = d[2] + d[1] + d[0]; t > s ? o = "A data inicial não pode ser posterior à data final." : u > t && 0 == parseInt($("#idAVASegmentacaoBloqueioEditar").val()) ? o = "O início e/ou fim do período de bloqueio deve ser posterior à data atual." : u > s && (o = "A data final não pode ser anterior à data atual.") } } return o } function validaData(a) { var e = a, o = new Array, i = new RegExp("(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[012])/[12][0-9]{3}"); return o = e.split("/"), erro = !1, -1 == e.search(i) ? erro = !0 : (4 == o[1] || 6 == o[1] || 9 == o[1] || 11 == o[1]) && o[0] > 30 ? erro = !0 : 2 == o[1] && (o[0] > 28 && o[2] % 4 != 0 && (erro = !0), o[0] > 29 && o[2] % 4 == 0 && (erro = !0)), erro ? !1 : !0 } function preencheZeros(a, e) { a += ""; var o = a.length; if (e > o) { var t = e - o; for (i = 0; i < t; i++) a = "0" + a } return a } function SalvarSeAlunoPodeTrocarFoto(a) { $.fancybox.showLoading(), $.ajax({ url: a.action, type: "post", data: { bolAlunoPodeTrocarFoto: $("#bolAlunoPodeTrocarFoto").is(":checked") }, success: function (a) { $.fancybox.hideLoading() }, error: function (a) { console.log(500 == a.status ? a.responseText : a.statusText), $.fancybox.hideLoading() } }) } function carregarNiveisBuscaGrupoDeTurma(a) { null != ajaxNiveisBuscaGrupoDeTurma && ajaxNiveisBuscaGrupoDeTurma.abort(), ajaxNiveisBuscaGrupoDeTurma = $.ajax({ url: "/ava/seletor/home/getNivelEnsinoByEscolaOuUnidade", data: { id: 0, intUnidade: a, intTipo: 1, bolCoordenador: !0 }, dataType: "JSON", type: "POST", success: function (a) { if (1 == a.erro || void 0 == a.listaEnsino || null == a.listaEnsino || 0 == a.listaEnsino.length) $("#nivelGruposDeTurma").removeAttr("disabled"), $("#nivelGruposDeTurma").html('<option value="0">Erro</option>'), $("#nivelGruposDeTurma").attr("disabled", "disabled"); else { var e = '<option value="-1">Nível (Todos)</option>'; for (var o in a.listaEnsino) e += '<option value="' + a.listaEnsino[o].idEnsino + '">' + a.listaEnsino[o].strEnsino + "</option>"; $("#nivelGruposDeTurma").removeAttr("disabled"), $("#nivelGruposDeTurma").html(e) } $("#nivelGruposDeTurma").html() }, error: function (a) { console.log(a.responseText) } }) } function carregarSeriesBuscaGrupoDeTurma(a) { null != ajaxSeriesBuscaGrupoDeTurma && ajaxSeriesBuscaGrupoDeTurma.abort(); var e = 0; $("#unidadesGruposDeTurma").length && (e = $("#unidadesGruposDeTurma").val()), ajaxSeriesBuscaGrupoDeTurma = $.ajax({ url: "/ava/seletor/home/getAnoSerie", data: { idEnsino: a, idEscola: 0, idUnidade: e, intTipo: 1, bolCoordenador: !0 }, dataType: "JSON", type: "POST", success: function (a) { if (1 == a.erro || void 0 == a.listaSerie || null == a.listaSerie || 0 == a.listaSerie.length) $("#serieGruposDeTurma").removeAttr("disabled"), $("#serieGruposDeTurma").html('<option value="0">Erro</option>'), $("#serieGruposDeTurma").attr("disabled", "disabled"); else { var e = '<option value="0">Série/Ano (Todos)</option>'; for (var o in a.listaSerie) e += '<option value="' + a.listaSerie[o].idSerie + '">' + a.listaSerie[o].strSerie + "</option>"; $("#serieGruposDeTurma").removeAttr("disabled"), $("#serieGruposDeTurma").html(e) } $("#nivelGruposDeTurma").html() }, error: function (a) { console.log(a.responseText) } }) } function PesquisarGruposDeTurma(a) { $(".moderadores_turma").show(), $(".acoes_massa").show(), $("#btnPesquisarGruposDeTurma").addClass("disable"), null != ajaxPesquisarGruposDeTurma && ajaxPesquisarGruposDeTurma.abort(), $("#unidadesGruposDeTurma").length && (idUnidadePesquisada = parseInt($("#unidadesGruposDeTurma").val())), idNivelPesquisado = parseInt($("#nivelGruposDeTurma").val()), idSeriePesquisada = parseInt($("#serieGruposDeTurma").val()), strBuscaPesquisa = $("#strBuscaGruposDeTurma").val(), intPaginacao = parseInt($("#intPaginacaoGruposDeTurma").val()), qtdItensPagina = parseInt($("#intQtdItensPaginaGruposDeTurma").val()), isNaN(idUnidadePesquisada) && (idUnidadePesquisada = 0), isNaN(idNivelPesquisado) && (idNivelPesquisado = 0), isNaN(idSeriePesquisada) && (idSeriePesquisada = 0), isNaN(intPaginacao) && (intPaginacao = 1, $("#intPaginacaoGruposDeTurma").val(1)), isNaN(qtdItensPagina) && (qtdItensPagina = 10, $("#intQtdItensPaginaGruposDeTurma").val(10)); var e = { idUnidade: idUnidadePesquisada, idNivel: idNivelPesquisado, idSerie: idSeriePesquisada, strBusca: strBuscaPesquisa }, o = jQuery.extend({ intPaginacao: intPaginacao, qtdItensPagina: qtdItensPagina }, e); $(".moderadores_turma tbody").remove(), $(".moderadores_turma thead").after('<tbody><tr><td colspan="4"><div style="padding: 20px 50%;"><img border="0" alt="carregando..." src="/AVA/StaticContent/Common/img/perfil/carregando.gif" /></div></td></tr></tbody>'), a && $(".moderadores_turma tfoot").remove(), ajaxPesquisarGruposDeTurma = $.ajax({ url: "/AVA/AdminAVA/Home/PesquisarGruposAdmin/", type: "POST", data: o, success: function (o) { var i = $(o); a ? (e.qtdItensPagina = qtdItensPagina, null != ajaxPesquisarGruposDeTurmaPaginacao && ajaxPesquisarGruposDeTurmaPaginacao.abort(), ajaxPesquisarGruposDeTurmaPaginacao = $.ajax({ url: "/AVA/AdminAVA/Home/PesquisarGruposAdminTotal/", type: "POST", data: e, success: function (a) { if (bolCarregandoPaginacao = !0, a.length) { var e = $(a); $(".moderadores_turma thead").after(e); { var o = $("#intTotalItensPaginaGruposDeTurma").val(); $("#intQtdItensPaginaGruposDeTurma").val() } $("#Pagination", e).pagination(o, { items_per_page: qtdItensPagina, num_display_entries: 5, current_page: 0, num_edge_entries: 1, link_to: "javascript:void(0);", callback: retornaPaginaGrupoTurma }) } $(".acoes_massa input.btn_branco").removeClass("disable"), $(".moderadores_turma tbody").remove(), $("#btnPesquisarGruposDeTurma").removeClass("disable"), $("input:checkbox", i).on("change", function () { $(this).is(":checked") ? $(this).parent().addClass("inputCheckboxChecked") : $(this).parent().removeClass("inputCheckboxChecked") }); try { $(".moderadores_turma thead").after(i) } catch (t) { console.log("Nenhum resultado") } }, error: function (a) { $(".moderadores_turma tbody").remove(), console.log(a.responseText), $("#btnPesquisarGruposDeTurma").removeClass("disable") } })) : ($(".acoes_massa input.btn_branco").removeClass("disable"), $(".moderadores_turma tbody").remove(), $(".moderadores_turma thead").after(i), $("#btnPesquisarGruposDeTurma").removeClass("disable"), $("input:checkbox", i).on("change", function () { $(this).is(":checked") ? $(this).parent().addClass("inputCheckboxChecked") : $(this).parent().removeClass("inputCheckboxChecked") })) }, error: function (a) { console.log(a.responseText), $("#btnPesquisarGruposDeTurma").removeClass("disable") } }) } function retornaPaginaGrupoTurma(a, e) { bolCarregandoPaginacao || (a++, $("#intPaginacaoGruposDeTurma").val(a), PesquisarGruposDeTurma(!1)), bolCarregandoPaginacao = !1 } function AtivarDesativarGrupoDeTurma(a, e, o) { null != ajaxAtivarDesativarGrupoDeTurma && ajaxAtivarDesativarGrupoDeTurma.abort(), ajaxAtivarDesativarGrupoDeTurma = $.ajax({ url: "/AVA/AdminAVA/Home/AtivarDesativarGrupoDeTurma/", type: "POST", data: { idGrupoTurma: a, bolAtivo: e }, success: function () { o && (e ? ($(".info_selecao_" + a + " .lajotinha").removeClass("desativado"), $("#drop_moderadores_" + a).hasClass("semprofessor") || $("#drop_moderadores_" + a).removeClass("desativado_combo")) : ($(".info_selecao_" + a + " .lajotinha").addClass("desativado"), $("#drop_moderadores_" + a).addClass("desativado_combo"))) }, error: function (a) { console.log(a.responseText) } }) } function DefinirModeradoresGrupoDeTurma(a) { null != ajaxDefinirModeradoresGrupoDeTurma && ajaxDefinirModeradoresGrupoDeTurma.abort(); var e = new Array, o = new Array, i = 0; if ($("#drop_moderadores_" + a + " input[type=checkbox]").each(function () { i++, $(this).is(":checked") && (e.push($(this).val()), o.push({ id: $(this).val(), nome: $.trim($(this).next().text()), src: $(this).next().find("img").attr("src") })) }), i == e.length || 0 == e.length) $(".info_selecao_" + a + " td").html("<p>Todos os professores estão definidos como moderadores.</p>"); else { var t = '<div class="seletorGlobal moderadoresGrupoDeTurma" idgrp="' + a + '">'; for (var n in o) t += '<div class="lajotinha" idgrp="' + a + '" idprof="' + o[n].id + '"><img src="' + o[n].src + '" height="24" width="24" /><span>' + o[n].nome + '</span><a href="javascript:void(0);" class="excluir_lajotinha FontAwesome" alt="Excluir da lista"></a></div>'; t += "</div>", $(".info_selecao_" + a + " td").html(t) } ajaxDefinirModeradoresGrupoDeTurma = $.ajax({ url: "/AVA/AdminAVA/Home/DefinirModeradoresGrupoDeTurma/", type: "POST", data: { idGrupoTurma: a, idsModeradores: e.join(";") }, error: function (a) { console.log(a.responseText) } }) } function changeCheckBoxConfiguracoesModeradores() { var a = $("#grupoTurmaCheckTopo").closest("table"); $("#grupoTurmaCheckTopo").parent().hasClass("inputCheckboxChecked") ? ($("input:checkbox.ckacao_massa", a).removeAttr("checked"), $("input:checkbox.ckacao_massa", a).parent().removeClass("inputCheckboxChecked")) : ($("input:checkbox.ckacao_massa", a).attr("checked", "checked"), $("input:checkbox.ckacao_massa", a).parent().addClass("inputCheckboxChecked")) } function CustomConfirmConfiguracoes(a, e, o) { $.fancybox({ type: "ajax", href: "/AVA/AdminAVA/Mensagem/AbandonarConfiguracoes/", afterShow: function () { $("body").on("click", "#btnSairPaginaConfiguracoes", function () { switch (bolFezAlteracaoConfiguracoes = !1, destinoConfiguracoes) { case "timeline": LimparCampoComentario(e), $.fancybox.close(), PrepararTimeLineFocus(o); break; case "btnFiltrarMensagens": LimparCampoComentario(e), $.fancybox.close(), PrepararFiltrarMensagens(); break; case "btnAtualizarDadosMensagens": LimparCampoComentario(e), $.fancybox.close(), PrepararAtualizarDadosMensagens(); break; case "AbaAdminAvisos": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-3"), listaAvisos(); break; case "AbaAdminEstatisticas": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-1"), listaRelatorios(); break; case "AbaAdminMensagens": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-2"), listaMensagem(); break; case "AbaAdminDenuncias": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-4"), listaDenuncias(0); break; case "AbaAdminSuspensoes": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-5"), listaSuspensos(0); break; case "AbaAdminAgenda": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-6"), listaAgenda("2,3,4"); break; case "AbaAdminAdms": LimparCampoComentario(e), $.fancybox.close(), listaAdmins(), $("#tabs").tabs("select", "#tabs-7"), limpaBuscaEducador(); break; case "AbaAdminLinkRapido": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-8"), linksRapidos(); break; case "AbaAdminMensagensGrupo": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-9"), listaMensagemGrupo(); break; case "AbaAdminConfiguracoes": LimparCampoComentario(e), $.fancybox.close(), $("#tabs").tabs("select", "#tabs-10"), configuracoes() } destinoConfiguracoes = null }), $("body").on("click", "#btnPermanecerPaginaConfiguracoes", function () { $("#tabs").tabs("select", "#tabs-2"), $.fancybox.close() }) }, closeBtn: !1, modal: !0, helpers: { overlay: { closeClick: !1, locked: !1} }, padding: 0 }) } function LimparCampoComentario(a) { for (var e = a.idMsgRapida.length, o = e - 1; o >= 0; o--) { var i = $(this).closest("article").hasClass("pgedu") ? "507px" : "441px"; $("#campoComentar_" + a.idMsgRapida[o] + " input").animate({ width: i }, 200).val(""), $("#campoComentar_" + a.idMsgRapida[o]).removeClass("foco"), $("#campoComentar_" + a.idMsgRapida[o]).blur(), a.idMsgRapida.splice(o, 1) } } function PrepararTimeLineFocus(a) { $("html, body").animate({ scrollTop: $("#campoComentar_" + a).offset().top - 400 }, 1e3); var e = $("#campoComentar_" + a).closest("article").hasClass("pgedu") ? "507px" : "441px"; $("#campoComentar_" + a + " input").animate({ width: e }, 200), $("#campoComentar_" + a).addClass("foco") } function PrepararFiltrarMensagens() { var a = $("#dtmIniPesq").val(), e = $("#dtmFimPesq").val(), o = 0; if ($("#aviso_style").remove(), !valida_data(a) || !valida_data(e)) return !1; $(".timeline").html('<div style="padding-top: 20px; padding-right: 20px; padding-bottom: 20px; padding-left: 28%;" id="loader_timeline"><img src="/AVA/StaticContent/Common/img/perfil/carregando.gif" border="0"></div>'), data = new Date, dia = data.getDate(), mes = data.getMonth(), ano = data.getFullYear(), ("" == a || null == a) && (a = dia + "/" + (mes + 1) + "/" + ano), ("" == e || null == e) && (e = dia + "/" + (mes + 1) + "/" + ano), $("#check_excluidos").is(":checked") && (o = 1); var i = -1, t = ""; void 0 == $("#cbUnidade").val() || $("#rbTpGerais").is(":checked") || (i = $("#cbUnidade").val(), t = 0 == i ? "Todas as unidades" : $("#cbUnidade :selected").text()); var n = "", s = $("#cbTipoGrupo :selected").val(); montaLajotinhaFiltroMensagem(a, e, o, t), $("#rbTpGerais").is(":checked") ? paginacaoListaMensagemAdmin(i, a, e, o, arrayUsuarioAux, arrayEntidadeAux) : ($(".lajotinha").each(function () { if (void 0 != $(this).attr("grupo-id")) { var a = $(this).attr("grupo-id"); n += a + "," } }), paginacaoListaMensagemGrupoAdmin(i, a, e, o, n, s, arrayUsuarioAux, arrayEntidadeAux)) } function PrepararAtualizarDadosMensagens() { $.ajax({ url: "/AVA/AdminAVA/Mensagem/Geral", async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, success: function (a) { $("#box_ListarMensagens").html(a), configuracoesIniciaisAbaMensagemAdminAVA() }, error: function (a) { console.debug(a.status) } }) } var clone = "", elementoReplace = "", cloneCat = "", elementoReplaceCat = "", arrayCategoria = new Array, arrayLink = new Array, copiaListaLinks = "", copiaTodosLinks = "", arrayGlobalCategoria = new Array, bolFezAlteracaoConfiguracoes = !1, strMensagemConfiguracaoNaoSalvaUnload = "Você fez alterações nesta página que ainda não foram salvas.", strMensagemConfiguracaoNaoSalva = "Você fez alterações nesta página que ainda não foram salvas. Tem certeza de que deseja sair?", _idMsgComentarioGlobal = null, objetoIdMensagemRapida = { idMsgRapida: new Array }, destinoConfiguracoes = null, bolPassouNoBeforeUnload = !1; window.onbeforeunload = function (a) { return bolPassouNoBeforeUnload = !0, bolFezAlteracaoConfiguracoes === !0 ? strMensagemConfiguracaoNaoSalvaUnload : void 0 }, jQuery(function (a) {
    a("body").on("keyup change paste", "input[name=strComentario]", function (e) { var o = !1, i = 0; for (_idMsgComentarioGlobal = a(e.target).attr("idMensagemRapida"), i = 0; i < objetoIdMensagemRapida.idMsgRapida.length; i++) if (objetoIdMensagemRapida.idMsgRapida[i] == _idMsgComentarioGlobal) { o = !0; break } o || "" != !a("#campoComentar_" + _idMsgComentarioGlobal + " input").val() ? o = !1 : objetoIdMensagemRapida.idMsgRapida.push(_idMsgComentarioGlobal), "" == !a("#campoComentar_" + _idMsgComentarioGlobal + " input").val() ? bolFezAlteracaoConfiguracoes = !0 : void 0 !== _idMsgComentarioGlobal && (objetoIdMensagemRapida.idMsgRapida.splice(i, 1), !objetoIdMensagemRapida.idMsgRapida.length > 0 && (bolFezAlteracaoConfiguracoes = !1)) }); var e = "click"; Modernizr.touch && (e = "touchstart"), a("#tabs").on(e, ".timeline.timeline_adm .e-wrap .ver_mais_doc", function (e) { e.preventDefault(); var o = a(this); o.prev().hasClass("mostra") ? (o.prev().slideToggle("slow", function () { a(this).removeClass("mostra") }), o.text("Ver mais")) : (o.prev().slideToggle("slow", function () { a(this).addClass("mostra") }), o.text("Ver menos")) }), a("#tabs").on("click", ".ativarOrdemCategoria", function () { a(".header_painel #todosLinksRapidos").sortable({ disabled: !1 }), a(".linkCont").slideUp("fast"), a(".categoriaSortable").css("cursor", "move"), a(".abrirFecharLinks").html('Abrir<span class="FontAwesome abrir"></span>'); var e = a(this); a(this).hasClass("helperConcluir") ? (a.ajax({ url: "/ava/adminava/linkrapido/aterarOrdemCategoria", data: { categorias: JSON.stringify(arrayGlobalCategoria) }, type: "POST", success: function (o) { var i = parseInt(o.error); 0 == i && (e.removeClass("helperConcluir"), e.html('<span class="icone_reordenar"></span> Iniciar ordenação de Categorias'), copiaTodosLinks = "", a(".cancelar_ordenacao").hide(), a(".header_painel #todosLinksRapidos").sortable({ disabled: !0 })), console.log(i) }, error: function (a) { console.log(a.responseText) } }), a(".categoriaSortable").css("cursor", "")) : a(".categoria_editar").size() > 0 ? alert("Termine todas as edições antes") : (a(this).html('<span class="icone_reordenar"></span> Concluir'), a(this).addClass("helperConcluir"), a(".cancelar_ordenacao").show(), copiaTodosLinks = a("#todosLinksRapidos").clone(), a(".header_painel #todosLinksRapidos").sortable({ disabled: !1 }), a(".Feed_full").fadeOut("fast")) }), a("#tabs").on("click", ".cancelar_ordenacao", function (e) { e.preventDefault(), a("#todosLinksRapidos").empty(), copiaTodosLinks.children().each(function () { a("#todosLinksRapidos").append(a(this)) }), copiaTodosLinks = "", a(".cancelar_ordenacao").hide(), a(".ativarOrdemCategoria").html('<span class="icone_reordenar"></span> Iniciar ordenação de Categorias').removeClass("helperConcluir"), a(".header_painel #todosLinksRapidos").sortable("refresh"), a(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }), a(".header_painel .linkCont").sortable("destroy"), gerarSortableLinks(), a(".categoriaSortable").css("cursor", "") }), a("#tabs").on("click", ".criarNovaCategoria", function (e) { if (e.preventDefault(), !a(this).hasClass("ativo")) { a(".cancelar_ordenacao").hide(), a(".ativarOrdemCategoria").html('<span class="icone_reordenar"></span> Iniciar ordenação de Categorias').removeClass("helperConcluir"), a(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }); var o = parseInt(a(this).closest(".header_painel").find(".categoriaSortable:last .categoriaCont .numeroOrdem").size() > 0 ? "" == a(this).closest(".header_painel").find(".categoriaSortable:last .categoriaCont .numeroOrdem").text() ? 0 : a(this).closest(".header_painel").find(".categoriaSortable:last .categoriaCont .numeroOrdem").text() : 0) + 1; o == 0 / 0 && (o = 1), a(".criarNovaCategoria").addClass("ativo"); var i = '<form class="categoria_editar" onsubmit="return false;"><input type="hidden" name="idCategoria" value="0"><span class="numeroOrdem din">' + o + '</span><div class="categoriaNome_editar">	<input type="text" name="strTitulo" placeholder="Titulo da Categoria">	<div class="acoes">		<input type="submit" class="btn_laranja salvarCategoria" value="Salvar">		<input type="reset" class="btn_cinza cancelarCategoria" value="Cancelar">	</div></div></form>'; a(".header_painel").find(".categoriaSortable").size() > 0 ? a(".header_painel").find(".categoriaSortable:last").after(i) : a(".header_painel").find("#todosLinksRapidos").prepend(i), a(".categoria_editar").find("input[name='strTitulo']").focus() } }), a("body").on(e, ".criarNovoLink", function (e) { if (e.preventDefault(), !a(this).hasClass("ativo")) { a(this).addClass("ativo"); var o = parseInt(a(this).closest(".linksCadastrados").find(".linkCont .categoriaLink:last").size() > 0 ? a(this).closest(".linksCadastrados").find(".linkCont .categoriaLink:last").text() : 0) + 1, i = '<form class="categoriaLink_editar" onsubmit="return false;"><input type="hidden" name="idlink" value="0"><span class="din numeroOrdem">' + o + '</span><div class="categoriaNome_editar"><input type="text" name="titulo" maxlength="70" placeholder="Titulo do link"><input type="text" name="link" placeholder="Url"><div class="acoes"><input type="submit" class="btn_laranja salvarLink" value="Salvar"><input type="reset" class="btn_cinza cancelarLink" value="Cancelar">				    </div>			    </div>		    </form>'; a(this).closest(".linkCont").find(".categoriaLink:last").size() > 0 ? a(this).closest(".linkCont").find(".categoriaLink:last").after(i) : a(this).closest(".linkCont").prepend(i) } }), a("#tabs").on(e, ".linkCont .categoriaLink .acoes .editar", function (e) { e.preventDefault(); var o = a(this).closest(".categoriaLink").attr("id-link"), i = a(this).closest(".categoriaLink").find(".strTitulo").text().replace(/"/g, "&quot;"), t = a(this).closest(".categoriaLink").find(".strLink").text(), n = a(this).closest(".categoriaLink").find(".numeroOrdem").text(); "" != clone && elementoReplace.replaceWith(clone), clone = a(this).closest(".categoriaLink").clone(); var s = '<form class="categoriaLink_editar" onsubmit="return false;"><input type="hidden" name="idlink" value="' + o + '"><span class="din numeroOrdem">' + n + '</span><div class="categoriaNome_editar"><input type="text" placeholder="Titulo do link" maxlength="70" name="titulo" value="' + i + '"><input type="text" placeholder="Url" name="link" value="' + t + '"><div class="acoes"><input type="submit" class="btn_laranja salvarLink" value="Salvar"><input type="reset" class="btn_cinza cancelarLink" value="Cancelar">				    </div>			    </div>		    </form>', r = a(this).closest(".linkCont"); a(this).closest(".categoriaLink").replaceWith(s), elementoReplace = r.find(".categoriaLink_editar") }), a("#tabs").on("click", ".cancelarCategoria", function (e) { e.preventDefault(), a(".btn_verde.criarNovaCategoria").removeClass("ativo"), a(this).closest(".categoria_editar").replaceWith(cloneCat), cloneCat = "", elementoReplaceCat = "" }), a("#tabs").on("click", ".cancelarLink", function (e) { e.preventDefault(), a(this).closest(".linkCont").find(".btn_verde.criarNovoLink").removeClass("ativo"), a(this).closest(".categoriaLink_editar").replaceWith(clone), clone = "", elementoReplace = "" }), a("body").on(e, ".abrirFecharLinks", function (e) {
        var o = a(this); e.preventDefault(), a(".ativarOrdemCategoria").removeClass("inativo"), a(".ativarOrdemCategoria").html('<span class="icone_reordenar"></span> Iniciar ordenação de Categorias').removeClass("helperConcluir"),
a(".cancelar_ordenacao").hide(), a(this).closest(".categoriaCont").next().hasClass("linkCont") && (a(this).closest(".categoriaCont").next().is(":visible") ? a(this).closest(".categoriaCont").next().slideUp("fast", function () { o.html('Abrir<span class="FontAwesome abrir"></span>'), a(".linkCont:visible").size() > 0 && a(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }) }) : a(this).closest(".categoriaCont").next().slideDown("fast", function () { o.html('Fechar<span class="FontAwesome"></span>'), a(".linkCont:visible").size() > 0 && a(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }) }))
    }), a("#tabs").on(e, ".categoriaCont .mostraExclusao", function () { a(".Feed_full").fadeOut("fast"); var e = a(this).closest(".categoriaLink").find(".Feed_full"); e.fadeIn("slow"), a(".ativarOrdemCategoria").removeClass("inativo"), a(".ativarOrdemCategoria").html('<span class="icone_reordenar"></span> Iniciar ordenação de Categorias').removeClass("helperConcluir"), a(".cancelar_ordenacao").hide(), a(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }), a(".categoriaSortable").css("cursor", "") }).on(e, ".Feed_full .cancelar", function () { a(this).closest(".Feed_full").fadeOut("fast") }).on(e, ".linkCont .categoriaLink .acoes .mostraExclusao", function () { a(".Feed_full").fadeOut("fast"); var e = a(this).closest(".categoriaLink").find(".Feed_full"); e.fadeIn("slow") }), a("#tabs").on(e, ".categoriaCont .excluir", function (e) { e.preventDefault(); var o = a(this).closest(".categoriaCont").attr("id-categoria"), i = a(this).closest(".categoriaSortable"); "" != o && a.ajax({ url: "/ava/adminava/linkrapido/excluirCategoria", type: "GET", dataType: "json", data: { idCategoria: o }, success: function (e) { var o = parseInt(e.error); 0 == o ? i.slideUp("fast", function () { a(this).remove(); var e = 1; a(".categoriaSortable").each(function () { a(this).find(".categoriaCont .numeroOrdem").text(e), e++ }) }) : alert(e.msg) }, error: function (a) { console.log(a.responseText) } }) }), a("body").on(e, ".categoriaCont .editar", function (e) { e.preventDefault(), a(".ativarOrdemCategoria").removeClass("inativo"), a(".ativarOrdemCategoria").html('<span class="icone_reordenar"></span> Iniciar ordenação de Categorias').removeClass("helperConcluir"), a(".cancelar_ordenacao").hide(), a(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }); var o = a(this).closest(".categoriaCont").attr("id-categoria"), i = a(this).closest(".categoriaCont").find(".numeroOrdem").text(), t = a(this).closest(".categoriaCont").find(".categoriaNome h4").text().replace(/"/g, "&quot;"); "" != cloneCat && elementoReplaceCat.replaceWith(cloneCat), cloneCat = a(this).closest(".categoriaCont").clone(), copiaListaLinks = a(this).closest(".linksCadastrados").find(".linkCont.ui-sortable").clone(); var n = '<form class="categoria_editar" onsubmit="return false;"><input type="hidden" name="idCategoria" value="' + o + '"><span class="numeroOrdem din">' + i + '</span><div class="categoriaNome_editar">	<input type="text" name="strTitulo" value="' + t + '" placeholder="Titulo da Categoria">	<div class="acoes">		<input type="submit" class="btn_laranja salvarCategoria" value="Salvar">		<input type="reset" class="btn_cinza cancelarCategoria" value="Cancelar">	</div></div></form>', s = a(this).closest(".linksCadastrados"); a(this).closest(".categoriaCont").replaceWith(n), elementoReplaceCat = s.find(".categoria_editar") }), a("#tabs").on("click", ".linkCont .categoriaLink .excluir", function (e) { var o = a(this).closest(".categoriaLink").attr("id-link"), i = a(this).closest(".linksCadastrados").attr("id-categoria"), t = a(this).closest(".categoriaLink"); "" != o && a.ajax({ url: "/ava/adminava/linkrapido/excluirLink", type: "GET", dataType: "json", data: { idLinkRapido: o, idCategoria: i }, success: function (e) { var o = parseInt(e.error); 0 == o ? t.slideUp("fast", function () { a(this).remove(), a(".linkCont").each(function () { var e = 1; a(this).find(".categoriaLink").each(function () { a(this).closest(".linksCadastrados").attr("id-categoria"); a(this).find(".numeroOrdem").text(e), e++ }) }) }) : alert(e.msg) }, error: function (a) { console.log(a.responseText) } }) }), a("#tabs").on(e, ".salvarCategoria", function (e) { e.preventDefault(); var o = a(this).closest(".categoria_editar").find("input[name=idCategoria]").val(), i = a(this).closest(".categoria_editar").find(".numeroOrdem").text(), t = a(this).closest(".categoria_editar").find("input[name=strTitulo]").val(), n = a(this).closest(".categoria_editar"); return "" != o && "" != i && "" != t ? a.ajax({ url: "/ava/adminava/linkrapido/inserirEditarCategoria", type: "GET", dataType: "json", contentType: "application/x-www-form-urlencoded; charset=UTF-8", data: { idLinkRapidoCategoria: o, strCategoria: t, intOrdem: i }, success: function (e) { var s = parseInt(e.error), r = "0" == o ? s : o, l = parseInt(e.padrao); if (l > 0 && a(".categoriaCont").each(function (e) { "1" == a(this).closest(".linksCadastrados").attr("padrao") && a(this).closest(".linksCadastrados").attr("id-categoria", l) }), a(".criarNovaCategoria").removeClass("ativo"), s > 0 || 0 == s) { var c = '<div class="linksCadastrados categoriaSortable" id-categoria="' + r + '"><div class="categoriaCont" id-categoria="' + r + '">	<div class="categoriaLink">		<span class="numeroOrdem din">' + i + '</span>		<div class="categoriaNome">			<h4>' + t.replace(/<script/gi, "&lt;script").replace(/<\/script/gi, "&lt;/script").replace(/</g, "&lt;").replace(/>/g, "&gt;") + '</h4>            <span class="fechar_categoria"></span>			<a href="javascript:void(0);" onclick="" class="abrirFecharLinks">Abrir<span class="FontAwesome abrir"></span></a>            <div class="acoes">				<a href="javascript:void(0);" class="editar">Editar</a>				<span>|</span>				<a href="javascript:void(0);" class="mostraExclusao">Excluir</a>                <!--<span class="black_tip_left tooltip black_tip_M" style="display:none;">                    <p>Deseja realmente excluir esta categoria? </p>                     <a class="bt_normal green excluir" href="javascript: void(0);">sim</a>                    <a class="bt_normal red cancelar" href="javascript: void(0);">não</a>                    <span class="black_tip_seta"></span>                </span>-->			</div>		</div>     <div class="Feed_full" style="display: none;">     			    <p>Deseja excluir esta categoria e todos os links associados a ela?</p>         <div class="acoesFeed">     			    <a href="javascript: void(0);" class="bt_normal green excluir">Sim</a>     			    <a href="javascript: void(0);" class="bt_normal red cancelar">Não</a>         </div>     		   </div>	        </div></div>'; "0" == o ? c += '<div class="linkCont ui-sortable" style="display: none;"><button class="btn_verde criarNovoLink">+ Criar link</button></div>' : c = c + '<div class="linkCont ui-sortable" style="display: none;">' + copiaListaLinks.html() + "</div>", c += "</div>", n.replaceWith(c), cloneCat = "", elementoReplaceCat = "", a(".header_painel .linkCont").sortable("refresh"), a(".header_painel #todosLinksRapidos").sortable("refresh"), a(".header_painel #todosLinksRapidos").sortable({ disabled: !0 }), a(".header_painel .linkCont").sortable("destroy"), gerarSortableLinks() } }, error: function (a) { console.log(a.responseText) } }) : alert("Preencha tudo"), !1 }), a("#tabs").on("click", ".salvarLink", function (e) { e.preventDefault(); var o = a(this).closest(".categoriaLink_editar").find("input[name=idlink]").val(), i = a(this).closest(".categoriaLink_editar").find(".numeroOrdem").text(), t = a(this).closest(".categoriaLink_editar").find("input[name=titulo]").val(), n = a(this).closest(".categoriaLink_editar").find("input[name=link]").val(), s = a(this).closest(".linksCadastrados").attr("id-categoria"), r = a(this).closest(".categoriaLink_editar"), l = a(this), c = /\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/gi, d = c.exec(a(this).closest(".categoriaLink_editar").find("input[name=link]").val().toLowerCase()); return d ? void ("" != t && "" != n ? a.ajax({ url: "/ava/adminava/linkrapido/inserirEditarLink", type: "POST", contentType: "application/x-www-form-urlencoded; charset=UTF-8", dataType: "json", data: { idLinkRapido: o, strTitulo: t, strLink: n, intOrdem: i, idCategoriaLinkRapido: s }, success: function (e) { var s = parseInt(e.error); if (0 > s) alert("Erro"); else { n.toLowerCase().indexOf("http://") < 0 && n.toLowerCase().indexOf("https://") < 0 && (n = "http://" + n), 0 >= o && (o = e.error), l.closest(".linkCont").find(".btn_verde.criarNovoLink").removeClass("ativo"); var c = '<div class="categoriaLink" id-link="' + o + '">        <span class="numeroOrdem din">' + i + '</span>    <div class="categoriaNome">  <a href="' + n + '" class="strTitulo">' + t.replace(/<script/gi, "&lt;script").replace(/<\/script/gi, "&lt;/script").replace(/</g, "&lt;").replace(/>/g, "&gt;") + '</a>    <span class="strLink"><a href="' + n + '" target="_blank">' + n + '</a></span>  <div class="acoes">      <a href="javascript:void(0);" class="editar">Editar</a>     <span>|</span>     <a href="javascript:void(0);" class="remover_adm_cadastrados mostraExclusao"><span class="FontAwesome"></span>Excluir</a>     <!--<span class="black_tip_left tooltip black_tip_M" style="display:none;">            <p>Deseja realmente excluir este link? </p>             <a class="bt_normal green excluir" href="javascript: void(0);">sim</a>            <a class="bt_normal red cancelar" href="javascript: void(0);">não</a>            <span class="black_tip_seta"></span>        </span>--> </div>		</div><div class="Feed_full" style="display: none;">    <p>Deseja realmente excluir este link?</p>         <div class="acoesFeed">   <a href="javascript: void(0);" class="bt_normal green excluir">Sim</a>   <a href="javascript: void(0);" class="bt_normal red cancelar">Não</a> </div> </div></div>'; r.replaceWith(c) } clone = "", elementoReplace = "", a(".header_painel #todosLinksRapidos").sortable("refresh"), a(".header_painel .linkCont").sortable("refresh"), a(".header_painel .linkCont").sortable({ disabled: !1 }) }, error: function (a) { console.log(a.responseText) } }) : alert("Campos ficaram em branco")) : (a(this).closest(".categoriaLink_editar").find("input[name=link]").addClass("erroLink").attr("placeholder", "Url Inválida").val(""), !1) }), a("#tabs").on("click", ".salvarEditarCategoria", function (e) { e.preventDefault(); try { var o = parseInt(a(this).attr("id-categoria")), i = a(this).attr("str-categoria"), t = parseInt(a(this).attr("ordem-categoria")); a.ajax({ url: "/ava/adminava/linkrapido/inserirEditarCategoria", data: { idLinkRapidoCategoria: o, strCategoria: i, intOrdem: t }, dataType: "json", success: function (a) { var e = parseInt(a.error); 0 > e && alert(a.msg) }, eror: function (a) { console.log(a.responseText) } }) } catch (e) { console.log(e.getMessage()) } }); var o = { afterShow: function () { montaCampoDataAvisos(), a("#dtmInicio").mask("99/99/9999"), a("#dtmFim").mask("99/99/9999"), a("#horaInicio").mask("99:99"), a("#horaFim").mask("99:99") }, width: 360, autoSize: !0, autoResize: !0, fitToView: !1, helpers: { overlay: { closeClick: !1, locked: !1} }, type: "ajax" }; lightBoxAVA(a("a#criar_aviso"), o), void 0 != a(".btAbreFechaFiltro") && a(".btAbreFechaFiltro").toggle(function () { a(".boxFiltro").slideUp(), a(this).html('Abrir<span class="fechado"></span>') }, function () { a(".boxFiltro").slideDown(), a(this).html('Fechar<span class="aberto"></span>') }), a("#tipo_evento").live("click", function () { a("#lista_agenda").removeClass("bt_selected"), a("#tipo_evento").addClass("bt_selected"), a(".msg_intro").html("Cadastre e edite tipos de eventos da sua escola."), a.ajax({ url: "/AVA/AdminAVA/Agenda/Evento", type: "POST", async: !0, cache: !1, success: function (e) { a(".agenda_painel").html(e), listaTipoEventoCor(), listaTipoEvento() }, error: function (a) { console.debug(a.status) } }) }), a("#btn_gravar").live("click", function () { var e = a("#strTipo").val(), o = a("input[name=opcao_cor]:checked").val(), i = a("#idTipo").val(); "" == i && (i = 0), "" == e ? jAlert("Digite o nome do tipo de evento.", "") : void 0 == o ? jAlert("Selecione cor para o tipo de evento.", "") : a.ajax({ url: "/AVA/AdminAVA/Agenda/GravarEventoTipo", type: "POST", contentType: "application/x-www-form-urlencoded; charset=UTF-8", data: { idTipo: i, idCor: o, strTipo: e }, success: function (a) { jAlert("Tipo de evento gravado com sucesso.", ""), listaTipoEvento(), limpaCamposAgenda() }, error: function (a) { console.debug(a.status) } }) }), a("#btn_cancelar").live("click", function () { a("#strTipo").val(""), a("#idTipo").val(""), a(".selecionada_cor").remove(), a(".editar_evento_agenda").parent().removeClass("ativo"), a("input[name=opcao_cor]").each(function () { a(this).removeAttr("checked") }) }), a("input[name=opcao_cor]").live("click", function () { a(".selecionada_cor").remove(), a(this).attr("checked", "checked"), a(this).parent().prepend("<span class='selecionada_cor'></span>") }), a("#btn_filtrarAgenda").live("click", function () { var e = ""; a("input[name='filtro_agenda[]']").each(function () { this.checked && (e += a(this).val() + ",") }), e.length > 0 && (e = e.substring(0, e.length - 1), listaAgenda(e)) }), a(".editar_evento_agenda").live("click", function () { a(".editar_evento_agenda").parent().removeClass("ativo"), a(this).parent().addClass("ativo") }), a("#lista_agenda").live("click", function () { a(".msg_intro").html("Acompanhe todos os eventos de agenda criados pelos professores e administradores de sua escola. Não inclui eventos pessoais."), listaAgenda("2,3,4") }), a(".linkAbaAdmin").bind("click", function () { var e = a(this).attr("href"); if (a("#tabs").tabs("select", "#tabs-2"), bolFezAlteracaoConfiguracoes) switch (e) { case "#tabs-3": destinoConfiguracoes = "AbaAdminAvisos", CustomConfirmConfiguracoes("AbaAdminAvisos", objetoIdMensagemRapida, 0); break; case "#tabs-1": destinoConfiguracoes = "AbaAdminEstatisticas", CustomConfirmConfiguracoes("AbaAdminEstatisticas", objetoIdMensagemRapida, 0); break; case "#tabs-2": destinoConfiguracoes = "AbaAdminMensagens", CustomConfirmConfiguracoes("AbaAdminMensagens", objetoIdMensagemRapida, 0); break; case "#tabs-4": destinoConfiguracoes = "AbaAdminDenuncias", CustomConfirmConfiguracoes("AbaAdminDenuncias", objetoIdMensagemRapida, 0); break; case "#tabs-5": destinoConfiguracoes = "AbaAdminSuspensoes", CustomConfirmConfiguracoes("AbaAdminSuspensoes", objetoIdMensagemRapida, 0); break; case "#tabs-6": destinoConfiguracoes = "AbaAdminAgenda", CustomConfirmConfiguracoes("AbaAdminAgenda", objetoIdMensagemRapida, 0); break; case "#tabs-7": destinoConfiguracoes = "AbaAdminAdms", CustomConfirmConfiguracoes("AbaAdminAdms", objetoIdMensagemRapida, 0); break; case "#tabs-8": destinoConfiguracoes = "AbaAdminLinkRapido", CustomConfirmConfiguracoes("AbaAdminLinkRapido", objetoIdMensagemRapida, 0); break; case "#tabs-9": destinoConfiguracoes = "AbaAdminMensagensGrupo", CustomConfirmConfiguracoes("AbaAdminMensagensGrupo", objetoIdMensagemRapida, 0); break; case "#tabs-10": destinoConfiguracoes = "AbaAdminConfiguracoes", CustomConfirmConfiguracoes("AbaAdminConfiguracoes", objetoIdMensagemRapida, 0) } else "#tabs-3" == e ? (a("#tabs").tabs("select", "#tabs-3"), location.href = "#avisos", listaAvisos()) : "#tabs-1" == e ? (a("#tabs").tabs("select", "#tabs-1"), location.href = "#estatisticas", listaRelatorios()) : "#tabs-2" == e ? (a("#tabs").tabs("select", "#tabs-2"), location.href = "#mensagens", listaMensagem()) : "#tabs-4" == e ? (a("#tabs").tabs("select", "#tabs-4"), location.href = "#denuncias", listaDenuncias(0)) : "#tabs-5" == e ? (a("#tabs").tabs("select", "#tabs-5"), location.href = "#suspensoes", listaSuspensos(0)) : "#tabs-6" == e ? (a("#tabs").tabs("select", "#tabs-6"), location.href = "#agenda", listaAgenda("2,3,4")) : "#tabs-7" == e ? (a("#tabs").tabs("select", "#tabs-7"), location.href = "#adms", listaAdmins(), limpaBuscaEducador()) : "#tabs-8" == e ? (a("#tabs").tabs("select", "#tabs-8"), location.href = "#linksrapido", linksRapidos()) : "#tabs-9" == e ? (a("#tabs").tabs("select", "#tabs-9"), location.href = "#mensagensgrupo", listaMensagemGrupo()) : "#tabs-10" == e ? (a("#tabs").tabs("select", "#tabs-10"), location.href = "#configuracoes", configuracoes()) : (a("#tabs").tabs("select", "#tabs-3"), location.href = "#avisos", listaAvisos()) }), a("#marcar_todos").live("click", function () { a("input[name='desmarcar_todos[]']").each(function () { a(this).removeAttr("checked") }), a("input[name='papel[]']").each(function () { a(this).attr("checked", "checked") }), a("input[name='segmentoSerie[]']").each(function () { a(this).attr("checked", "checked") }) }), a("#desmarcar_todos").live("click", function () { a("input[name='marcar_todos[]']").each(function () { a(this).removeAttr("checked") }), a("input[name='papel[]']").each(function () { a(this).removeAttr("checked") }), a("input[name='segmentoSerie[]']").each(function () { a(this).removeAttr("checked") }) }), a("#input_aluno").live("click", function () { a("input[name='segmentoSerie[]']").each(function () { this.checked ? a(this).removeAttr("checked") : a(this).attr("checked", "checked") }) }), a("#ava_container").on("click", ".opcoes_config_botaoCriar", function () { a(".opcoes_config_botaoCriar").hide(), a(".opcoes_config_bloqueio").show(), a(".opcoes_config_botoes").show(), a(".opcoes_config_bloqueio_checkbox").show(), a(".opcoes_config_bloqueados_novo").hide(), a("#idAVASegmentacaoBloqueioEditar").val(0), a("#dataInicio").prop("disabled", !1), a("#dataInicio").datepicker("setDate", a("#dataInicio").val()), a("#dataFim").datepicker("setDate", a("#dataFim").val()), a("#dataFim").datepicker("option", "minDate", a("#dataInicio").val()), a("#area_bloqueio_ferias").find(".styleCheckbox input").each(function () { a(this).is(":checked") && a(this).trigger("click") }) }), a("#ava_container").on("click", "#opcoes_config_btnCancelar", function () { a("#area_bloqueio_ferias").find(".styleCheckbox").removeClass("inputCheckboxChecked"), a(".opcoes_config_bloqueio option:eq(0)").prop("selected", !0), a(".opcoes_config_botaoCriar").show(), a(".opcoes_config_bloqueio").hide(), a(".apagar_bloqueio").hide(), a(".opcoes_config_botoes").hide(), a(".opcoes_config_bloqueio_checkbox").hide(), a(".opcoes_config_bloqueados").show() }), a("#area_bloqueio_ferias").on("click", ".btn_fechar_mensagem", function () { a(".opcoes_config_botoes").show(), a(".opcoes_config_bloqueio").show(), a(".mensagem_confirmacao_bloqueio").hide() }), a("#ava_container").on("click", ".btn_excluirBloqueio", function (e) { e.preventDefault(), a(this).next().show() }).on("click", ".btn_ocultarExcluirBloqueio", function (e) { e.preventDefault(), a(this).closest(".apagar_bloqueio").hide() }).on("click", ".btn_ExcluirBloqueio", function (e) { e.preventDefault(); var o = a(this).data("idavasegmentacaobloqueio"); a.ajax({ type: "POST", url: "/AVA/AdminAVA/Home/ExcluirBloqueio/", data: { idAVASegmentacaoBloqueio: o }, async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, dataType: "json", success: function (e) { var i = parseInt(e.error); 0 == i ? (a(".linhaBloqueio" + o).remove(), "" == a("#tab_bloqueio_ferias > tbody").html().trim() && a("#tab_bloqueio_ferias").remove()) : console.log(e.reseponseText) }, error: function (a) { console.debug(a.status) } }) }).on("click", ".btn_OcultarMensagemConfirmacaoBloqueio", function (e) { e.preventDefault(), a(".mensagem_confirmacao_bloqueio").hide(), a("#area_bloqueio_ferias").find(".styleCheckbox").removeClass("inputCheckboxChecked"), a("#area_bloqueio_ferias").find(".styleCheckbox input").trigger("click"), a(".opcoes_config_bloqueio option:eq(0)").prop("selected", !0), a(".opcoes_config_botaoCriar").show(), a(".opcoes_config_bloqueio").hide(), a(".apagar_bloqueio").hide(), a(".opcoes_config_botoes").hide(), a(".opcoes_config_bloqueio_checkbox").hide(), a(".opcoes_config_bloqueados").show(), a(".opcoes_config_bloqueados_novo").hide(), a(".opcoes_config_bloqueados_novo").empty() }).on("click", ".btn_editarBloqueio", function (e) { e.preventDefault(), a.ajax({ type: "POST", url: "/AVA/AdminAVA/Home/EditarBloqueio/", data: { idAVASegmentacaoBloqueio: a(this).data("idavasegmentacaobloqueio") }, async: !0, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1", cache: !1, dataType: "json", success: function (e) { a(".opcoes_config_bloqueio").show(), a(".opcoes_config_botaoCriar").hide(), a(".opcoes_config_botoes").show(), a(".opcoes_config_bloqueio_checkbox").show(), a(".mensagem_confirmacao_bloqueio").hide(), a("#area_bloqueio_ferias").find(".styleCheckbox input").each(function () { a(this).is(":checked") && a(this).trigger("click") }), arrayBloqueio = e.bloqueio; var o = arrayBloqueio.idAVASegmentacaoBloqueio; o > 0 && a("#dataInicio").prop("disabled", !0), a("#idAVASegmentacaoBloqueioEditar").val(o); var i = (arrayBloqueio.idAVASegmentacao, arrayBloqueio.dtmInicio), t = arrayBloqueio.dtmFim, n = null; null != arrayBloqueio.bloqueioUnidade && (1 == arrayBloqueio.bloqueioUnidade.length ? (n = arrayBloqueio.bloqueioUnidade[0].idUnidade, a(".opcoes_config_bloqueio").find("option[id=selBloqueio_" + n + "]").prop("selected", !0)) : a(".opcoes_config_bloqueio").find("option[id=selBloqueio_0]").prop("selected", !0)); for (var s = 0; s < arrayBloqueio.lSegmentacao.length; s++) { var r = arrayBloqueio.lSegmentacao[s].idAVASegmentacao; 0 == a(".opcoes_config_bloqueio").find("input[name=chkSerie_" + r + "]:checked").size() && a(".opcoes_config_bloqueio").find("input[name=chkSerie_" + r + "]").trigger("click") } a("#dataInicio").datepicker("setDate", i), a("#dataFim").datepicker("setDate", t), a("#dataFim").datepicker("option", "minDate", i) }, error: function (a) { console.debug(a.status) } }) }), a("body").on("click", ".desativado_combo", function (a) { return a.preventDefault(), !1 }), a("body").on("change", "#unidadesGruposDeTurma", function () { var e = a(this).val(); a("#nivelGruposDeTurma").html("<option>Nível de ensino</option>").attr("disabled", "disabled"), a("#serieGruposDeTurma").html("<option>Série/ano</option>").attr("disabled", "disabled"), e > 0 && carregarNiveisBuscaGrupoDeTurma(e) }), a("body").on("change", "#nivelGruposDeTurma", function () { var e = a(this).val(); a("#serieGruposDeTurma").html("<option>Série/ano</option>").attr("disabled", "disabled"), e >= 0 && carregarSeriesBuscaGrupoDeTurma(e) }), a("body").on("click", "#btnPesquisarGruposDeTurma", function () { a(this).hasClass("disable") || (a("#intPaginacaoGruposDeTurma").val(1), a("#intQtdItensPaginaGruposDeTurma").val(10), PesquisarGruposDeTurma(!0)) }), a("body").on("click", "#comboQtdPaginacaoGrupo li label", function () { a("#intPaginacaoGruposDeTurma").val(1), a("#intQtdItensPaginaGruposDeTurma").val(a(this).parent().attr("qtdP")), PesquisarGruposDeTurma(!0) }), a("body").on("click", ".drop_bolAtivo li label", function () { var e = a(this).closest(".drop_bolAtivo").attr("idgrp"), o = 1 == a(this).prev().val(); o ? a(this).closest(".btn-group").find(".whiteButton").removeClass("desativado_grupo") : a(this).closest(".btn-group").find(".whiteButton").addClass("desativado_grupo"), AtivarDesativarGrupoDeTurma(e, o, !0) }), a("body").on("click", ".drop_moderadores li label", function (e) { a(this).prev().is(":checked") ? a(this).prev().removeAttr("checked") : a(this).prev().attr("checked", "checked"), e.preventDefault(), a(this).closest(".dropdown-menu").prev().html('<span class="FontAwesome"></span>Selecione os moderadores <span class="caret"></span>'); var o = a(this).closest(".drop_moderadores").attr("idgrp"); return DefinirModeradoresGrupoDeTurma(o), !1 }), a("body").on("click", ".seletorGlobal.moderadoresGrupoDeTurma .lajotinha a", function () { if (!a(this).closest(".lajotinha").hasClass("desativado")) { var e = a(this).closest(".lajotinha").attr("idgrp"), o = a(this).closest(".lajotinha").attr("idprof"); a("#checkbox_moderadores_" + e + "_" + o).removeAttr("checked"), a(this).closest(".lajotinha").fadeOut().remove(), DefinirModeradoresGrupoDeTurma(e) } }), a("body").on("click", "#grupoTurmaCheckTopoAux", changeCheckBoxConfiguracoesModeradores), a("body").on("change", "#grupoTurmaCheckTopo", changeCheckBoxConfiguracoesModeradores), a("body").on("click", ".acoes_massa input.btn_branco", function () { if (!a(this).hasClass("disable")) { var e = parseInt(a(".acoes_massa select").val()); if (isNaN(e) && (e = 0), e > 0) { a(this).addClass("disable"), a(".acoes_massa select").val(0); var o = new Array; a(".moderadores_turma tbody input:checkbox.ckacao_massa").each(function () { a(this).is(":checked") && o.push(a(this).attr("idgrp")) }), AtivarDesativarGrupoDeTurma(o.join(";"), 2 == e, !1), a("#grupoTurmaCheckTopo").removeAttr("checked"), a("#grupoTurmaCheckTopo").parent().removeClass("inputCheckboxChecked"), PesquisarGruposDeTurma(!1) } } })
}); var ajaxNiveisBuscaGrupoDeTurma = null, ajaxSeriesBuscaGrupoDeTurma = null, idUnidadePesquisada = 0, idNivelPesquisado = 0, idSeriePesquisada = 0, strBuscaPesquisa = "", ajaxPesquisarGruposDeTurma = null, ajaxPesquisarGruposDeTurmaPaginacao = null, bolCarregandoPaginacao = !1, ajaxAtivarDesativarGrupoDeTurma = null, ajaxDefinirModeradoresGrupoDeTurma = null;