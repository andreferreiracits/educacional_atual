var timeoutPesquisa; function PesquisaSecoes(e) { var b = -2; var c = 0; var d = e; var a = $(e).siblings(".campo_drop"); e.live("keydown", function (f) { if (timeoutPesquisa) { clearTimeout(timeoutPesquisa) } switch (f.keyCode) { case 13: if (b > -1) { f.preventDefault(); location.href = a.find('li:not(li[class^="info"]):not(li[class^="fim"]):eq(' + b + ") a").attr("href") } break; case 40: b++; break; case 38: b--; break; case 27: b = -2; a.hide(); break; case 39: case 37: break; default: b = -2; timeoutPesquisa = window.setTimeout(function () { Pesq_BuscaSecoes(d, a, b, c) }, 700) } if (b > -2) { } }) } function Pesq_BuscaSecoes(d, a, b, c) { if (d.val() == "") { a.hide() } else { a.load("/AVA/Barras/AcessoRapido/PesquisaAcessoRapido/", { sPesquisa: d.val() }, function (e) { b = -1; a.find(".fim_resultados").hide(); a.find("ul").prepend('<li class="infocampo"><i class="FontAwesome"></i>Resultados r&aacute;pidos de se&ccedil;&otilde;es</li>'); a.find("ul").append('<li class="linha_dicionario highlight" style="display: none;"><a href="/dicionarioaurelio/home.asp?pesquisa=' + d.val() + '">Pesquisar <B>' + d.val() + "</B> no <strong>Dicion&aacute;rio Aur&eacute;lio</strong></a></li>"); a.find("ul").append('<li class="linha_enciclopedia highlight" style="display: none;"><a href="/enciclopedia/res_busca.asp?rdo_tipo=1&pesquisa=1&edt_texto=' + d.val() + '">Pesquisar <B>' + d.val() + "</B> na <strong>Enciclop&eacute;dia</strong></a></li>"); $(document.body).click(function () { b = -2; a.hide() }); c = a.find('li:not(li[class^="info"]):not(li[class^="fim"])').length; a.show(); if (c == 3) { if (a.find('li:not(li[class^="info"]):not(li[class^="fim"]):eq(0)').text() == "Nenhum resultado. Que tal ver tudo?") { a.find('li:not(li[class^="info"]):not(li[class^="fim"]):eq(0)').addClass("infocampo").hide(); a.find("li:eq(0)").hide(); a.hide(); c-- } } }) } };