function listaRelatorios(){$.ajax({url:"/AVA/AdminAVA/Relatorios/Geral",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(a){$("#box_ListarEstatisticas").html(a)},error:function(a){console.debug(a.status)}})}function listaMensagem(){$.ajax({url:"/AVA/AdminAVA/Mensagem/Geral",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(a){$("#box_ListarMensagens").html(a)},error:function(a){console.debug(a.status)}})}function listaAvisos(){$.ajax({url:"/AVA/AdminAVA/Avisos/Listando",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(a){$("#box_ListarAviso").html(a)},error:function(a){console.debug(a.status)}})}function listaDenuncias(){$.ajax({url:"/AVA/AdminAVA/Denuncias/Listar",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(a){$("#box_ListarDenuncia").html(a);var b={onComplete:function(){$("#dtmInicio").mask("99/99/9999");$("#dtmFim").mask("99/99/9999");$("#horaInicio").mask("99:99");$("#horaFim").mask("99:99")},hideOnOverlayClick:false,type:"ajax"};lightBoxAVA($("a#editar_aviso"),b)},error:function(a){console.debug(a.status)}})}function listaSuspensos(){$.ajax({url:"/AVA/AdminAVA/Suspensao/Listando",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(a){$("#box_ListarSuspensos").html(a)},error:function(a){console.debug(a.status)}})}function listaAgenda(){$.ajax({url:"/AVA/AdminAVA/Agenda/Listando",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(a){$("#box_ListarAgenda").html(a)},error:function(a){console.debug(a.status)}})}function alteraStatusDenuncia(a){$.ajax({type:"POST",url:"/AVA/AdminAVA/Denuncias/SetarVisualizada",cache:false,data:{id:a},async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(a){listaDenuncias()},error:function(a){console.debug(a.status)}})}function gravaAviso(){var a=$("#idBAviso").val();var b=$("#strMensagem").val();var c=$("#dtmInicio").val();var d=$("#horaInicio").val();var e=$("#dtmFim").val();var f=$("#horaFim").val();$("#aviso_style").remove();if(b==""||b==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Título em branco! Favor preencher.</p></div>');return false}else if(c==""||c==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data inicial em branco! Favor preencher.</p></div>');return false}else if(d==""||d==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora inicial em branco! Favor preencher.</p></div>');return false}else if(e==""||e==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data final em branco! Favor preencher.</p></div>');return false}else if(f==""||f==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data final em branco! Favor preencher.</p></div>');return false}else if(!verifica_hora(d)){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora inicial inválida!</p></div>');return false}else if(!verifica_hora(f)){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora final inválida!</p></div>');return false}else if(!valida_data(c)){return false}else if(!valida_data(e)){return false}else if(c==e&&d>=f){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora incial maior ou igual a hora final!</p></div>');return false}else{var g=c.split("/");c=g[2]+"-"+g[1]+"-"+g[0];var h=e.split("/");e=h[2]+"-"+h[1]+"-"+h[0];$.ajax({type:"POST",url:"/AVA/AdminAVA/Avisos/GravarAviso",cache:false,data:{idBAviso:a,strMensagem:b,dtmInicio:c,horaInicio:d,dtmFim:e,horaFim:f},async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(a){parent.$.fancybox.close();listaAvisos()},error:function(a){console.debug(a.status)}});return true}}function excluiAviso(a){$.ajax({type:"POST",url:"/AVA/AdminAVA/Avisos/Excluir/"+a,async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(a){listaAvisos()},error:function(a){console.debug(a.status)}})}function editaAviso(){var a=$("#idBAviso").val();var b=$("#strMensagem").val();var c=$("#dtmInicio").val();var d=$("#horaInicio").val();var e=$("#dtmFim").val();var f=$("#horaFim").val();$("#aviso_style").remove();if(b==""||b==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Título em branco! Favor preencher.</p></div>');return false}else if(c==""||c==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data inicial em branco! Favor preencher.</p></div>');return false}else if(d==""||d==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora inicial em branco! Favor preencher.</p></div>');return false}else if(e==""||e==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data final em branco! Favor preencher.</p></div>');return false}else if(f==""||f==null){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data final em branco! Favor preencher.</p></div>');return false}else if(!verifica_hora(d)){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora inicial inválida!</p></div>');return false}else if(!verifica_hora(f)){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora final inválida!</p></div>');return false}else if(!valida_data(c)){return false}else if(!valida_data(e)){return false}else if(c==e&&d>=f){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Hora incial maior ou igual a hora final!</p></div>');return false}else{var g=c.split("/");c=g[2]+"-"+g[1]+"-"+g[0];var h=e.split("/");e=h[2]+"-"+h[1]+"-"+h[0];$.ajax({type:"POST",url:"/AVA/AdminAVA/Avisos/Editar/",cache:false,data:{idBAviso:a,strMensagem:b,dtmInicio:c,horaInicio:d,dtmFim:e,horaFim:f},async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(a){parent.$.fancybox.close();listaAvisos()},error:function(a){console.debug(a.status)}})}}function verifica_hora(a){var b=a.split(":");if(b[0]<0||b[0]>23||b[1]<0||b[1]>59){return false}else{return true}}function valida_data(a){if(a!=""){var b=new Array;var c=new RegExp("(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[012])/[12][0-9]{3}");b=a.split("/");erro=false;if(a.search(c)==-1)erro=true;else if((b[1]==4||b[1]==6||b[1]==9||b[1]==11)&&b[0]>30)erro=true;else if(b[1]==2){if(b[0]>28&&b[2]%4!=0)erro=true;if(b[0]>29&&b[2]%4==0)erro=true}if(b[2]<1800){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> O ano deve ser superior a 1800.</p></div>');return false}if(erro){$("#mostra_aviso").append('<div id="aviso_style" style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-info"></span><strong>Atenção!</strong> Data inválida!</p></div>');return false}else{return true}}else{return true}}function PegarValoresCheckbox(){papeis=new Array;$("input[type=checkbox][name='papel[]']:checked").each(function(){papeis.push($(this).val())});if(papeis.length>0){var a=papeis.toString();var b=true}else{alert("Nenhum papel selecionado!")}segmentacaoSerie=new Array;$("input[type=checkbox][name='segmentSerie[]']:checked").each(function(){segmentacaoSerie.push($(this).val())});if(segmentacaoSerie.length>0){var c=segmentacaoSerie.toString();var d=true}else{alert("Nenhuma segmentaçãoSerie selecionada!")}if(b==true){alert("Fooi")}else{alert("Papel em branco!")}}jQuery(function(a){a(function(){a("#tabs").tabs()});var b={onComplete:function(){a("#dtmInicio").mask("99/99/9999");a("#dtmFim").mask("99/99/9999");a("#horaInicio").mask("99:99");a("#horaFim").mask("99:99")},hideOnOverlayClick:false,type:"ajax"};lightBoxAVA(a("a#criar_aviso"),b);listaMensagem();listaAvisos();listaDenuncias();listaSuspensos();listaAgenda();a("#btRelatorioDia").live("click",function(){a.ajax({url:"/AVA/AdminAVA/Mensagem/Geral",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(b){a("#box_ListarMensagens").html(b)},error:function(a){console.debug(a.status)}})});a("#btRelatorioSemana").live("click",function(){a.ajax({url:"/AVA/AdminAVA/Relatorios/Geral?tipo=semana",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(b){a("#box_ListarEstatisticas").html(b)},error:function(a){console.debug(a.status)}})});a("#btRelatorioMes").live("click",function(){a.ajax({url:"/AVA/AdminAVA/Relatorios/Geral?tipo=mes",async:true,contentType:"application/x-www-form-urlencoded; charset=iso-8859-1",cache:false,success:function(b){a("#box_ListarEstatisticas").html(b)},error:function(a){console.debug(a.status)}})})})