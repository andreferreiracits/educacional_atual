(function(b){b.fn.atualizaCadastro=function(c){PosiLog.logDebug(c);this.opts=jQuery.extend(b.atualizaCadastroDefaultOptions,c||{});a(b(this),this.opts)};function a(d,c){PosiLog.logDebug("[$.ajax] AtualizaCadastro >>>>>>>>> Inciando chamada Ajax ["+c.templateUrl+"] ....");b.ajax({url:c.templateUrl,cache:false,success:function(e){PosiLog.logDebug("[$.ajax] AtualizaCadastro >>>>>>>>> Inciando chamada Ajax ["+c.dataSourceUrl+"] ....");b.ajax({url:c.dataSourceUrl,cache:false,dataType:"json",type:"post",success:function(f,j,i){e=e.replace(/<<StaticContent>>/g,c.staticContentUrl);PosiLog.logDebug("[$.ajax.success] AtualizaCadastro >>>>>>>>> Inserindo resultado na pagina. \ntextStatus: ["+j+"]\ndata: ["+f+"]");var h=jsontemplate.Template(e,{more_formatters:JSON.stringify});var g=h.expand(f);d.html(g);d.attr("href","#meu-espaco-atualiza-email");d.fancybox({autoDimensions:true,showCloseButton:false,onClosed:function(){b.ajax({url:c.dataSourceOkUrl,cache:false,dataType:"json",type:"post",success:function(k,m,l){PosiLog.logDebug("[$.ajax.success] AtualizaCadastro >>>>>>>>> DataSourceOk!!! ")},error:function(k,m,l){PosiLog.logError("[$.ajax.error] AtualizaCadastro >>>>>>>>> DataSourceOk  ")}})}})},error:function(f,h,g){PosiLog.logError("[$.ajax.error] AtualizaCadastro >>>>>>>>> Erro ao tentar carregar .... \n"+h+"\n\n"+f.toString())}})}})}b.atualizaCadastroDefaultOptions={dataSourceUrl:"",dataSourceOkUrl:"",templateUrl:"",staticContentUrl:""}})(jQuery);