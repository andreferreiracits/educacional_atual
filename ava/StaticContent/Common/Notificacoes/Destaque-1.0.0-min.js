(function(b){b.fn.destaque=function(c){PosiLog.logDebug(c);this.opts=jQuery.extend(b.destaqueDefaultOptions,c||{});a(b(this),this.opts)};function a(d,c){PosiLog.logDebug("[$.ajax] Destaques >>>>>>>>> Inciando chamada Ajax ["+c.templateUrl+"] ....");b.ajax({url:c.templateUrl,cache:false,success:function(e){PosiLog.logDebug("[$.ajax] Destaques >>>>>>>>> Inciando chamada Ajax ["+c.dataSourceUrl+"] ....");b.ajax({url:c.dataSourceUrl,cache:false,dataType:"json",type:"post",success:function(f,j,i){e=e.replace(/<<StaticContent>>/g,c.staticContentUrl);PosiLog.logDebug("[$.ajax.success] Destaques >>>>>>>>> Inserindo resultado na pagina. \ntextStatus: ["+j+"]\ndata: ["+f+"]");var h=jsontemplate.Template(e,{more_formatters:JSON.stringify});var g=h.expand(f);d.html(g);d.find("#meu-espaco-destaque-triger").attr("href","#meu-espaco-destaque");d.find("#meu-espaco-destaque-triger").fancybox({autoDimensions:true,onComplete:function(){if(b("#meu-espaco-destaque").height()>0){b.fancybox.changeSize(b("#meu-espaco-destaque").width(),b("#meu-espaco-destaque").height())}},onClosed:function(){b.ajax({url:c.dataSourceOkUrl,cache:false,dataType:"json",type:"post",success:function(k,m,l){PosiLog.logDebug("[$.ajax.success] Destaques >>>>>>>>> DataSourceOk!!! ")},error:function(k,m,l){PosiLog.logError("[$.ajax.error] Destaques >>>>>>>>> DataSourceOk  ")}})}});if(f){if(f[0]!=0&&typeof f[0]!="undefined"){if(!f[0].bolAbriuDestaque){d.find("#meu-espaco-destaque-triger").trigger("click")}}}},error:function(f,h,g){PosiLog.logError("[$.ajax.error] Destaques >>>>>>>>> Erro ao tentar carregar .... \n"+h+"\n\n"+f.toString())}})}})}b.destaqueDefaultOptions={dataSourceUrl:"",dataSourceOkUrl:"",templateUrl:"",staticContentUrl:""}})(jQuery);